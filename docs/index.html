<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>nix-clap</title><meta name="description" content="Documentation for nix-clap"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">nix-clap</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>nix-clap</h1></div><div class="tsd-panel tsd-typography"><p><a href="https://npmjs.org/package/nix-clap"><img src="https://badge.fury.io/js/nix-clap.svg" alt="NPM version"></a> <a href="https://github.com/jchip/nix-clap/actions/workflows/node.js.yml"><img src="https://github.com/jchip/nix-clap/actions/workflows/node.js.yml/badge.svg" alt="Build Status"></a>
<a href="https://david-dm.org/jchip/nix-clap"><img src="https://david-dm.org/jchip/nix-clap/status.svg" alt="Dependency Status"></a> <a href="https://david-dm.org/jchip/nix-clap?type=dev"><img src="https://david-dm.org/jchip/nix-clap/dev-status.svg" alt="devDependency Status"></a>
<a href="https://coveralls.io/github/jchip/nix-clap?branch=master"><img src="https://coveralls.io/repos/github/jchip/nix-clap/badge.svg?branch=master" alt="coverage"></a></p>
<h1 id="nixclap" class="tsd-anchor-link">NixClap<a href="#nixclap" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>Simple, lightweight, flexible, and comprehensive Un*x Command Line Argument Parsing for NodeJS.</p>
<h1 id="features" class="tsd-anchor-link">Features<a href="#features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><ul>
<li>Lightweight with minimal dependencies.</li>
<li>Comprehensive and flexible parsing capabilities similar to conventional Un*x parsing.</li>
<li>Flexible handling of options and commands that can take variadic params.</li>
<li>A simple and straightforward JSON interface for specifying options and commands.</li>
<li>Very informative result that tells you where each option came from.</li>
<li>Greedy mode for command arguments with -# flag to consume additional unknown arguments.</li>
<li><a href="https://webpack.js.org/">Webpack</a> friendly - allows bundling your cli into a single JS file with webpack.</li>
</ul>
<h1 id="examples" class="tsd-anchor-link">Examples<a href="#examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>Options only:</p>
<pre><code class="js"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">NixClap</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;nix-clap&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">options</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-2">names:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">desc:</span><span class="hl-1"> </span><span class="hl-3">&quot;specify names&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">alias:</span><span class="hl-1"> [</span><span class="hl-3">&quot;n&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;m&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-2">args:</span><span class="hl-1"> </span><span class="hl-3">&quot;&lt; string..1,Inf&gt;&quot;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">nc</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">NixClap</span><span class="hl-1">().</span><span class="hl-6">version</span><span class="hl-1">(</span><span class="hl-3">&quot;1.0.0&quot;</span><span class="hl-1">).</span><span class="hl-6">usage</span><span class="hl-1">(</span><span class="hl-3">&quot;$0 [options]&quot;</span><span class="hl-1">).</span><span class="hl-6">init</span><span class="hl-1">(</span><span class="hl-2">options</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">parsed</span><span class="hl-1"> = </span><span class="hl-2">nc</span><span class="hl-1">.</span><span class="hl-6">parse</span><span class="hl-1">();</span><br/><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;names&quot;</span><span class="hl-1">, </span><span class="hl-2">parsed</span><span class="hl-1">.</span><span class="hl-2">opts</span><span class="hl-1">.</span><span class="hl-2">names</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>With commands:</p>
<pre><code class="js"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">NixClap</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;nix-clap&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">options</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-2">verbose:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">desc:</span><span class="hl-1"> </span><span class="hl-3">&quot;enable verbose mode&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">alias:</span><span class="hl-1"> </span><span class="hl-3">&quot;v&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">args:</span><span class="hl-1"> </span><span class="hl-3">&quot;&lt; boolean&gt;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">argDefault:</span><span class="hl-1"> </span><span class="hl-3">&quot;false&quot;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">commands</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-2">compile:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">desc:</span><span class="hl-1"> </span><span class="hl-3">&quot;run compile on the files&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">args:</span><span class="hl-1"> </span><span class="hl-3">&quot;&lt;files...&gt;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">exec</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-2">parsed</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;compile&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">parsed</span><span class="hl-1">.</span><span class="hl-2">command</span><span class="hl-1">.</span><span class="hl-2">jsonMeta</span><span class="hl-1">.</span><span class="hl-2">subCommands</span><span class="hl-1">.</span><span class="hl-2">compile</span><span class="hl-1">.</span><span class="hl-2">args</span><span class="hl-1">.</span><span class="hl-2">files</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;verbose&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">parsed</span><span class="hl-1">.</span><span class="hl-2">opts</span><span class="hl-1">.</span><span class="hl-2">verbose</span><br/><span class="hl-1">      );</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">nc</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">NixClap</span><span class="hl-1">()</span><br/><span class="hl-1">  .</span><span class="hl-6">version</span><span class="hl-1">(</span><span class="hl-3">&quot;1.0.0&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-6">usage</span><span class="hl-1">(</span><span class="hl-3">&quot;$0 [options] &lt;command&gt; [options]&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-6">init</span><span class="hl-1">(</span><span class="hl-2">options</span><span class="hl-1">, </span><span class="hl-2">commands</span><span class="hl-1">);</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">parsed</span><span class="hl-1"> = </span><span class="hl-2">nc</span><span class="hl-1">.</span><span class="hl-6">parse</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<blockquote>
<p><code>version</code>, <code>help</code>, and <code>usage</code> must be called before <code>init</code></p>
</blockquote>
<p>Usage:</p>
<pre><code class="bash"><span class="hl-6">$</span><span class="hl-1"> </span><span class="hl-3">my-prog</span><span class="hl-1"> </span><span class="hl-3">compile</span><span class="hl-1"> </span><span class="hl-4">--verbose</span><span class="hl-1"> </span><span class="hl-3">file1.jsx</span><span class="hl-1"> </span><span class="hl-3">file2.jsx</span><span class="hl-1"> </span><span class="hl-3">file3.jsx</span>
</code><button type="button">Copy</button></pre>

<h2 id="more-examples" class="tsd-anchor-link">More Examples<a href="#more-examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>See <a href="./examples">examples</a> folder for more working samples.</p>
<h1 id="parsing-capabilities" class="tsd-anchor-link">Parsing Capabilities<a href="#parsing-capabilities" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><h2 id="options" class="tsd-anchor-link">Options<a href="#options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Example: <code>prog -xazvf=hello --foo-option hello bar -. --enable-blah</code></p>
<ul>
<li>Support <code>-</code> single char options or <code>--</code> long form options.</li>
<li>Options can have aliases.</li>
<li>Both option forms can have argument specified with <code>=</code> or space.
<ul>
<li>ie: long form <code>--foo-option=bar</code> or <code>--foo-option bar</code></li>
<li>ie: short form <code>-f=bar</code> or <code>-f bar</code></li>
</ul>
</li>
<li>Both option forms can have variadic array args.
<ul>
<li>ie: <code>--foo-option hello bar</code> or <code>-f hello bar</code></li>
<li>array args can have an optional type</li>
</ul>
</li>
<li><code>-</code> options can be compounded, like <code>-xazvf</code>.
<ul>
<li>Last char can have args, like <code>-xazvf=hello</code> or <code>-xazvf hello</code>.</li>
<li>Other chars are treated as <code>boolean</code> options automatically.</li>
</ul>
</li>
<li>Variadic array args are terminated by any other options such as <code>-x</code> or <code>--xyz</code>, or explicitly with <code>-.</code> or <code>--.</code>
<ul>
<li>ie: <code>cmd1 arg1 arg2 --some-array abc def ghi -. cmd2 arg1 arg2</code>.</li>
</ul>
</li>
<li>Allow arbitrary unknown options but with arguments specified through <code>=</code> only.
<ul>
<li>Since it's ambiguous whether to take a non-option arg following an unknown option as an argument or a command.</li>
</ul>
</li>
<li>Counting number of option occurrences.</li>
<li>Boolean option can be negated with <code>--no-</code> prefix.</li>
<li>Allow custom value type coercions with a function or RegExp.</li>
</ul>
<h2 id="commands" class="tsd-anchor-link">Commands<a href="#commands" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Example: <code>prog add 1 2 3 4</code></p>
<ul>
<li>Commands can have optional or required arguments.
<ul>
<li>Each argument type defaults to <code>string</code>, but can have an optional type</li>
</ul>
</li>
<li>Commands can have aliases.</li>
<li>Possible to specify multiple commands.</li>
<li>Commands can have variadic array arguments.</li>
<li>Variadic array args are terminated by any other options such as <code>-x</code> or <code>--xyz</code>, or explicitly with <code>-.</code> or <code>--.</code>
<ul>
<li>ie: <code>prog order pizza soda -. pickup</code> (specifies two commands: <code>order</code> and <code>pickup</code>)</li>
</ul>
</li>
<li>Command can have its own options that are binded to it only.</li>
<li>Top level options can be binded to specific commands only.</li>
<li>Unbind top level options can be specified before or after commands.</li>
<li>Allow arbitrary unknown commands that do not have arguments.</li>
<li>Allow multiple custom value type coercions for each command.</li>
</ul>
<h3 id="multiple-commands" class="tsd-anchor-link">Multiple Commands<a href="#multiple-commands" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Example: <code>prog add 1 2 3 4 -. mult 4 5 6 7 8</code></p>
<blockquote>
<p>First Command: <code>add</code> with four numbers input
Second Command: <code>mult</code> with five numbers input</p>
</blockquote>
<ul>
<li>Since there are multiple commands with variadic arguments, the <code>-.</code> in the middle terminates the <code>add</code> command.</li>
</ul>
<h3 id="sub-commands" class="tsd-anchor-link">Sub Commands<a href="#sub-commands" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Example: <code>prog calc add 1 2 3 4 -. mult 4 5 6 7</code></p>
<blockquote>
<p>Main command: <code>calc</code>
Sub Command: <code>add</code> that can take variadic number of numbers
Sub Command: <code>mult</code> that can take variadic number of numbers</p>
</blockquote>
<ul>
<li>Since there are multiple sub commands, the <code>-.</code> in the middle terminates the <code>add</code> sub command.</li>
</ul>
<h2 id="greedy-mode" class="tsd-anchor-link">Greedy Mode<a href="#greedy-mode" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Commands can enter &quot;greedy mode&quot; using the <code>-#</code> flag, which allows them to consume additional arguments that would otherwise be treated as new commands.</p>
<p>Example: <code>prog compile file1.js file2.js -# command other arguments</code></p>
<p>In this example, without the <code>-#</code> flag, &quot;command&quot; would be parsed as a new command. With <code>-#</code>, it's treated as another argument to the &quot;compile&quot; command.</p>
<p>Greedy mode continues until a terminator token (<code>-.</code> or <code>--.</code>) is encountered:</p>
<pre><code class="bash"><span class="hl-6">$</span><span class="hl-1"> </span><span class="hl-3">prog</span><span class="hl-1"> </span><span class="hl-3">compile</span><span class="hl-1"> </span><span class="hl-3">file1.js</span><span class="hl-1"> </span><span class="hl-3">-#</span><span class="hl-1"> </span><span class="hl-3">some-command-name</span><span class="hl-1"> </span><span class="hl-3">more-args</span><span class="hl-1"> </span><span class="hl-4">-.</span><span class="hl-1"> </span><span class="hl-3">actual-command</span>
</code><button type="button">Copy</button></pre>

<p>This is useful when your command might need to accept arguments that could be interpreted as command names.</p>
<h2 id="terminating-and-resuming" class="tsd-anchor-link">Terminating and Resuming<a href="#terminating-and-resuming" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><code>--</code> terminates parsing, with remaining args returned in <code>parsed._</code>.</li>
<li>Parsing can be resumed after it's terminated.</li>
<li><code>-.</code> or <code>--.</code> can terminate variadic params for commands and options.</li>
</ul>
<h1 id="install" class="tsd-anchor-link">Install<a href="#install" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><pre><code class="bash"><span class="hl-6">npm</span><span class="hl-1"> </span><span class="hl-3">i</span><span class="hl-1"> </span><span class="hl-3">nix-clap</span><span class="hl-1"> </span><span class="hl-4">--save</span>
</code><button type="button">Copy</button></pre>

<h1 id="interface" class="tsd-anchor-link">Interface<a href="#interface" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>This module exposes a class with a few methods.</p>
<p>See <a href="#apis">APIs</a> for more details.</p>
<h2 id="options-spec" class="tsd-anchor-link"><code>options spec</code><a href="#options-spec" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="js"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">options</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-3">&quot;some-option&quot;</span><span class="hl-2">:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">alias:</span><span class="hl-1"> [</span><span class="hl-3">&quot;s&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;so&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-2">desc:</span><span class="hl-1"> </span><span class="hl-3">&quot;description&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">args:</span><span class="hl-1"> </span><span class="hl-3">&quot;[number cans] [enum] [boolean diet] [string..]&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">argDefault:</span><span class="hl-1"> [</span><span class="hl-3">&quot;6&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;coke&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;true&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;foo&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-2">custom:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">enum:</span><span class="hl-7"> /</span><span class="hl-8">^</span><span class="hl-9">(</span><span class="hl-7">coke</span><span class="hl-8">|</span><span class="hl-7">pepsi</span><span class="hl-9">)</span><span class="hl-8">$</span><span class="hl-7">/</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-2">customDefault:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">enum:</span><span class="hl-1"> </span><span class="hl-3">&quot;coke&quot;</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-2">allowCmd:</span><span class="hl-1"> [</span><span class="hl-3">&quot;cmd1&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;cmd2&quot;</span><span class="hl-1">]</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-3">&quot;another-option&quot;</span><span class="hl-2">:</span><span class="hl-1"> {}</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<p>Where:</p>
<table>
<thead>
<tr>
<th>field</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>alias</code></td>
<td>Specify aliases for the option, as a single string or an array of strings.</td>
</tr>
<tr>
<td><code>args</code></td>
<td>Arguments for the option. <code>&lt;type name&gt;</code> means it's required and <code>[type name]</code> optional.</td>
</tr>
<tr>
<td><code>desc</code></td>
<td>Description for the option - a string or a function that returns string.</td>
</tr>
<tr>
<td><code>argDefault</code></td>
<td>Default values to use <em>when all args are optional</em>.</td>
</tr>
<tr>
<td><code>require</code></td>
<td><code>true</code>/<code>false</code> whether this option must be specified.</td>
</tr>
<tr>
<td><code>requireArg</code></td>
<td><code>true</code>/<code>false</code> whether argument for the option is required.</td>
</tr>
<tr>
<td><code>allowCmd</code></td>
<td>list of command names this option is allow to follow only.</td>
</tr>
<tr>
<td><code>custom</code></td>
<td>- specify <a href="#value-coercion">value coercion</a> for custom types.</td>
</tr>
<tr>
<td><code>customDefault</code></td>
<td>- default values to use for each <a href="#value-coercion">value coercion</a> if user specified something but the coercion returns <code>undefined</code>.</td>
</tr>
<tr>
<td></td>
<td>* Coercion returning <code>undefined</code> will cause failure if no default is specified.</td>
</tr>
<tr>
<td><code>counting</code></td>
<td>Maximum count value for counting options. Use <code>Infinity</code> for unlimited counting.</td>
</tr>
</tbody>
</table>
<h2 id="commands-spec" class="tsd-anchor-link"><code>commands spec</code><a href="#commands-spec" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Command spec share some properties that are the same as <a href="#options-spec">option spec</a>.</p>
<p>Command doesn't support the following:</p>
<ul>
<li>no <code>allowCmd</code> property.</li>
<li>args can't have <code>count</code> type.</li>
</ul>
<p>Command supports a few more properties: <code>usage</code>, <code>exec</code>, and <code>options</code>.</p>
<pre><code class="js"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">commands</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-2">cmd1:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">alias:</span><span class="hl-1"> [</span><span class="hl-3">&quot;c&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-2">desc:</span><span class="hl-1"> </span><span class="hl-3">&quot;description&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">args:</span><span class="hl-1"> </span><span class="hl-3">&quot;[number cans] [enum] [boolean diet] [string..]&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">argDefault:</span><span class="hl-1"> [</span><span class="hl-3">&quot;6&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;coke&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;true&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;foo&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-2">custom:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">enum:</span><span class="hl-7"> /</span><span class="hl-8">^</span><span class="hl-9">(</span><span class="hl-7">coke</span><span class="hl-8">|</span><span class="hl-7">pepsi</span><span class="hl-9">)</span><span class="hl-8">$</span><span class="hl-7">/</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-2">customDefault:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">enum:</span><span class="hl-1"> </span><span class="hl-3">&quot;coke&quot;</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-2">usage:</span><span class="hl-1"> </span><span class="hl-3">&quot;$0 $1&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">exec</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> {},</span><br/><span class="hl-1">    </span><span class="hl-2">options:</span><span class="hl-1"> {}</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-2">cmd2:</span><span class="hl-1"> {}</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<p>Where:</p>
<table>
<thead>
<tr>
<th>field</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>alias</code></td>
<td>Specify aliases for the command, as a single string or an array of strings.</td>
</tr>
<tr>
<td><code>args</code></td>
<td>Specify arguments for the command. <code>&lt;&gt;</code> means it's required and <code>[]</code> optional. See <a href="#rules-for-command-args">rules</a> for more info.</td>
</tr>
<tr>
<td><code>usage</code></td>
<td>usage message when help for the command is invoked - a string or a function that returns a string.</td>
</tr>
<tr>
<td></td>
<td><code>$0</code> will be replaced with program name and <code>$1</code> with command name.</td>
</tr>
<tr>
<td><code>desc</code></td>
<td>Description for the command - can be a string or a function that returns a string.</td>
</tr>
<tr>
<td><code>exec</code></td>
<td>The callback handler for the command - see <a href="#command-exec-handler">here</a> for more details.</td>
</tr>
<tr>
<td><code>defaultCommand</code></td>
<td>If <code>true</code>, set the command as default, which is invoked when no command was given in command line.</td>
</tr>
<tr>
<td></td>
<td>- Only one command can be default.</td>
</tr>
<tr>
<td></td>
<td>- Default command cannot have required args and must have the <code>exec</code> handler</td>
</tr>
<tr>
<td><code>defaultValues</code></td>
<td>- If set, specify the default values for value coercions, with a default value for each custom type name.</td>
</tr>
<tr>
<td><code>options</code></td>
<td>List of options arguments private to the command. Follows the same spec as <a href="#options-spec">top level options</a></td>
</tr>
</tbody>
</table>
<h3 id="rules-for-command-args" class="tsd-anchor-link">Rules for Command <code>args</code><a href="#rules-for-command-args" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Rules for when specifying <code>args</code> for the command:</p>
<ul>
<li>all required args must be before optional args</li>
<li>last one can specify variadic args with <code>..</code>, like <code>&lt;names..&gt;</code> or <code>[names..]</code></li>
<li>If you just want to get the list of args without naming it, you can specify with <code>&lt;..&gt;</code> or <code>[..]</code></li>
<li>named args can have an optional type like <code>&lt;number value&gt;</code> or <code>[number values..]</code>
<ul>
<li>supported types are <code>number</code>, <code>float</code>, <code>string</code>, <code>boolean</code>, or <a href="#value-coercion">coercion</a></li>
</ul>
</li>
</ul>
<h2 id="value-coercion" class="tsd-anchor-link">Value Coercion<a href="#value-coercion" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>If none of the predefined types work for you, you can specify your own as a function or a RegExp, or any value.</p>
<p>You use any valid identifier for the value type, and then you define a field with the same name in your spec that can be:</p>
<ul>
<li><code>function</code> - will be called with the value to convert</li>
<li><code>RegExp</code> - will be used to match the value. <code>undefined</code> is returned if it didn't match.</li>
<li>Anything else - will be used as the converted value.</li>
</ul>
<p>For example:</p>
<pre><code class="js"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">options</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-2">customFn:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;fnval&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">fnval</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-2">value</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">value</span><span class="hl-1">.</span><span class="hl-6">substr</span><span class="hl-1">(</span><span class="hl-10">0</span><span class="hl-1">, </span><span class="hl-10">1</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-2">customRegex:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;rx&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">rx:</span><span class="hl-7"> /</span><span class="hl-8">^</span><span class="hl-7">test</span><span class="hl-8">$</span><span class="hl-7">/</span><span class="hl-4">i</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-2">customAny:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;foo&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">foo:</span><span class="hl-1"> </span><span class="hl-3">&quot;bar&quot;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">commands</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-2">foo:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">args:</span><span class="hl-1"> </span><span class="hl-3">&quot;&lt;type1 value1&gt; &lt;type2 value2&gt;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">type1</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-2">value</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-3">`test-</span><span class="hl-4">${</span><span class="hl-2">value</span><span class="hl-4">}</span><span class="hl-3">`</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">type2:</span><span class="hl-7"> /</span><span class="hl-8">^</span><span class="hl-7">test</span><span class="hl-8">$</span><span class="hl-7">/</span><span class="hl-4">i</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<h2 id="parse-result" class="tsd-anchor-link">Parse Result<a href="#parse-result" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Use the method <a href="#parseargv-start-parsed"><code>parse</code></a> to parse command line arguments. It will return a parse result object.</p>
<pre><code class="js"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-11">command</span><span class="hl-1">: {</span><br/><span class="hl-1">    </span><span class="hl-11">jsonMeta</span><span class="hl-1">: {</span><br/><span class="hl-1">      </span><span class="hl-11">name</span><span class="hl-1">: </span><span class="hl-3">&quot;~root-command~&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-11">alias</span><span class="hl-1">: </span><span class="hl-3">&quot;~root-command~&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-11">argList</span><span class="hl-1">: [],</span><br/><span class="hl-1">      </span><span class="hl-11">args</span><span class="hl-1">: {},</span><br/><span class="hl-1">      </span><span class="hl-11">opts</span><span class="hl-1">: {},</span><br/><span class="hl-1">      </span><span class="hl-11">optsFull</span><span class="hl-1">: {},</span><br/><span class="hl-1">      </span><span class="hl-11">optsCount</span><span class="hl-1">: {},</span><br/><span class="hl-1">      </span><span class="hl-11">source</span><span class="hl-1">: {},</span><br/><span class="hl-1">      </span><span class="hl-11">verbatim</span><span class="hl-1">: {},</span><br/><span class="hl-1">      </span><span class="hl-11">subCommands</span><span class="hl-1">: {}</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-11">index</span><span class="hl-1">: </span><span class="hl-10">5</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">error</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-11">_</span><span class="hl-1">: [],</span><br/><span class="hl-1">  </span><span class="hl-11">argv</span><span class="hl-1">: []</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Where:</p>
<ul>
<li><code>command</code> - The parsed command object with a <code>jsonMeta</code> property containing detailed information</li>
<li><code>index</code> - the index in <code>argv</code> parse stopped</li>
<li><code>error</code> - If parse failed and your <code>parse-fail</code> event handler throws, then this will contain the parse error. See <a href="#skip-default-event-behaviors">skip default event behaviors</a> for more details.</li>
<li><code>argv</code> - original array of argv</li>
<li><code>_</code> - remaining args in the <code>argv</code> array in case parsing was terminated by <code>--</code>.</li>
</ul>
<p>If any command with <a href="#command-exec-handler"><code>exec</code> handlers</a> were specified, then <code>parse</code> will invoke them before returning the parse result object.</p>
<h3 id="parse-result-command-object" class="tsd-anchor-link">Parse Result Command Object<a href="#parse-result-command-object" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The command.jsonMeta object contains the following information:</p>
<pre><code class="js"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-11">name</span><span class="hl-1">: </span><span class="hl-3">&quot;~root-command~&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-11">alias</span><span class="hl-1">: </span><span class="hl-3">&quot;~root-command~&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-11">argList</span><span class="hl-1">: [],</span><br/><span class="hl-1">  </span><span class="hl-11">args</span><span class="hl-1">: {},</span><br/><span class="hl-1">  </span><span class="hl-11">opts</span><span class="hl-1">: {}, </span><span class="hl-12">// contains the actual values for each option</span><br/><span class="hl-1">  </span><span class="hl-11">optsFull</span><span class="hl-1">: {}, </span><span class="hl-12">// contains the detailed values for each option, including array indices</span><br/><span class="hl-1">  </span><span class="hl-11">optsCount</span><span class="hl-1">: {}, </span><span class="hl-12">// contains the count for counting options</span><br/><span class="hl-1">  </span><span class="hl-11">source</span><span class="hl-1">: {}, </span><span class="hl-12">// contains info about where the option value came from</span><br/><span class="hl-1">  </span><span class="hl-11">verbatim</span><span class="hl-1">: {}, </span><span class="hl-12">// contains original unprocessed value</span><br/><span class="hl-1">  </span><span class="hl-11">subCommands</span><span class="hl-1">: {} </span><span class="hl-12">// contains parsed sub-commands</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>The <code>source</code> field can have the following values:</p>
<ul>
<li><code>cli</code> - option specified by user in the command line</li>
<li><code>cli-default</code> - User specified a value that didn't match RegExp and fallback to default.</li>
<li><code>cli-unmatch</code> - User specified a value that didn't match RegExp and there's no default to fallback to.</li>
<li><code>default</code> - default value in your <a href="#options-spec">options spec</a></li>
<li><code>user</code> - values you applied by calling the <a href="#applyconfigconfig-parsed-src"><code>applyConfig</code></a> method</li>
</ul>
<h3 id="command-exec-handler" class="tsd-anchor-link">Command <code>exec</code> handler<a href="#command-exec-handler" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>If the command has an <code>exec</code> handler, then it will be called with one argument:</p>
<pre><code class="js"><span class="hl-6">exec</span><span class="hl-1">(</span><span class="hl-2">result</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<ul>
<li><code>result</code> is the parse result object, which includes the command information in <code>result.command.jsonMeta</code></li>
</ul>
<p>You can access command-specific arguments through the jsonMeta structure:</p>
<pre><code class="js"><span class="hl-6">exec</span><span class="hl-1">(</span><span class="hl-2">result</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">commandArgs</span><span class="hl-1"> = </span><span class="hl-2">result</span><span class="hl-1">.</span><span class="hl-2">command</span><span class="hl-1">.</span><span class="hl-2">jsonMeta</span><span class="hl-1">.</span><span class="hl-2">subCommands</span><span class="hl-1">.</span><span class="hl-2">myCommand</span><span class="hl-1">.</span><span class="hl-2">args</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">commandOptions</span><span class="hl-1"> = </span><span class="hl-2">result</span><span class="hl-1">.</span><span class="hl-2">command</span><span class="hl-1">.</span><span class="hl-2">jsonMeta</span><span class="hl-1">.</span><span class="hl-2">subCommands</span><span class="hl-1">.</span><span class="hl-2">myCommand</span><span class="hl-1">.</span><span class="hl-2">opts</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-12">// Process command...</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<blockquote>
<p>You can turn this off with the <code>skipExec</code> config flag passed to <a href="#constructorconfig"><code>NixClap</code> constructor</a></p>
</blockquote>
<h2 id="events" class="tsd-anchor-link">Events<a href="#events" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p><code>NixClap</code> emits these events:</p>
<ul>
<li><code>help</code> - when <code>--help</code> is invoked, emitted with the parse result object.</li>
<li><code>pre-help</code> - before output for <code>--help</code></li>
<li><code>post-help</code> - after output for <code>--help</code></li>
<li><code>version</code> - when <code>--version</code> is invoked, emitted with the parse result object.</li>
<li><code>parsed</code> - when all parsing is done but before command <code>exec</code> are invoked, emitted with <code>{ nixClap, parsed }</code> where <code>nixClap</code> is the NixClap instance.</li>
<li><code>parse-fail</code> - when parse failed, emitted with parse result object, which has <code>error</code> field.</li>
<li><code>unknown-option</code> - when an unknown option is found, emitted with option name</li>
<li><code>unknown-command</code> - when an unknown command is found, emitted with command context, which has <code>name</code> field.</li>
<li><code>no-action</code> - when you have commands with <code>exec</code> and user specified no command that triggered an <code>exec</code> call.</li>
<li><code>regex-unmatch</code> - when you have <a href="#value-coercion">value coercion</a> using a RegExp but the user specified a value that didn't match the RegEx.</li>
<li><code>exit</code> - When program is expected to terminate, emit with exit code.</li>
</ul>
<h3 id="default-event-handlers" class="tsd-anchor-link">Default Event Handlers<a href="#default-event-handlers" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>NixClap has default handlers for these events:</p>
<ul>
<li><code>help</code> - Output help and emit <code>exit</code></li>
<li><code>version</code> - If <code>version</code> has been set, then output version and emit <code>exit</code>.</li>
<li><code>parse-fail</code> - Output help and error message, and emit <code>exit</code>.</li>
<li><code>unknown-option</code> - Throws Error <code>Unknown option ${name}</code></li>
<li><code>unknown-command</code> - Throws Error <code>Unkown command ${ctx.name}</code></li>
<li><code>no-action</code> - Output help with error <code>No command given</code> and emit <code>exit</code></li>
</ul>
<ul>
<li><code>regex-unmatch</code> - Output a message to let user know that value didn't match and default will be used.</li>
</ul>
<ul>
<li><code>exit</code> - calls <code>process.exit(code)</code></li>
</ul>
<h4 id="skip-default-event-behaviors" class="tsd-anchor-link">Skip Default Event Behaviors<a href="#skip-default-event-behaviors" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>You can remove the default event handlers with one of these approaches:</p>
<ul>
<li>With the <a href="#removedefaulthandlers"><code>removeDefaultHandlers</code></a> method.</li>
<li>By passing in <code>handlers</code> object in the <code>config</code> for the constructor.</li>
</ul>
<p>For example, using <code>removeDefaultHandlers</code>:</p>
<pre><code class="js"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">nc</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">NixClap</span><span class="hl-1">().</span><span class="hl-6">init</span><span class="hl-1">(</span><span class="hl-2">options</span><span class="hl-1">, </span><span class="hl-2">commands</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">parsed</span><span class="hl-1"> = </span><span class="hl-2">nc</span><span class="hl-1">.</span><span class="hl-6">removeDefaultHandlers</span><span class="hl-1">(</span><span class="hl-3">&quot;parse-fail&quot;</span><span class="hl-1">).</span><span class="hl-6">parse</span><span class="hl-1">();</span><br/><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">parsed</span><span class="hl-1">.</span><span class="hl-2">error</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-12">// handle the parse error here</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Using constructor config.</p>
<pre><code class="js"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">parsed</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">NixClap</span><span class="hl-1">({ </span><span class="hl-2">handlers:</span><span class="hl-1"> { </span><span class="hl-3">&quot;parse-fail&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-4">false</span><span class="hl-1"> } }).</span><span class="hl-6">parse</span><span class="hl-1">();</span><br/><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">parsed</span><span class="hl-1">.</span><span class="hl-2">error</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-12">// handle the parse error here</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h2 id="apis" class="tsd-anchor-link">APIs<a href="#apis" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>These are methods <code>NixClap</code> class supports.</p>
<ul>
<li><a href="#nixclap">NixClap</a></li>
<li><a href="#features">Features</a></li>
<li><a href="#examples">Examples</a>
<ul>
<li><a href="#more-examples">More Examples</a></li>
</ul>
</li>
<li><a href="#parsing-capabilities">Parsing Capabilities</a>
<ul>
<li><a href="#options">Options</a></li>
<li><a href="#commands">Commands</a>
<ul>
<li><a href="#multiple-commands">Multiple Commands</a></li>
<li><a href="#sub-commands">Sub Commands</a></li>
</ul>
</li>
<li><a href="#terminating-and-resuming">Terminating and Resuming</a></li>
</ul>
</li>
<li><a href="#install">Install</a></li>
<li><a href="#interface">Interface</a>
<ul>
<li><a href="#options-spec"><code>options spec</code></a></li>
<li><a href="#commands-spec"><code>commands spec</code></a>
<ul>
<li><a href="#rules-for-command-args">Rules for Command <code>args</code></a></li>
</ul>
</li>
<li><a href="#value-coercion">Value Coercion</a></li>
<li><a href="#parse-result">Parse Result</a>
<ul>
<li><a href="#parse-result-command-object">Parse Result Command Object</a></li>
<li><a href="#command-exec-handler">Command <code>exec</code> handler</a></li>
</ul>
</li>
<li><a href="#events">Events</a>
<ul>
<li><a href="#default-event-handlers">Default Event Handlers</a>
<ul>
<li><a href="#skip-default-event-behaviors">Skip Default Event Behaviors</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#apis">APIs</a>
<ul>
<li><a href="#constructorconfig"><code>constructor(config)</code></a></li>
<li><a href="#versionv"><code>version(v)</code></a></li>
<li><a href="#helpsetting"><code>help(setting)</code></a></li>
<li><a href="#usagemsg-cmdusagemsg"><code>usage(msg)</code>, <code>cmdUsage(msg)</code></a></li>
<li><a href="#initoptions-commands"><code>init(options, commands)</code></a></li>
<li><a href="#defaultcommandname"><code>defaultCommand(name)</code></a></li>
<li><a href="#parseargv-start-parsed"><code>parse(argv, start, parsed)</code></a></li>
<li><a href="#parseasyncargv-start-parsed"><code>parseAsync(argv, start, parsed)</code></a></li>
<li><a href="#showhelperr-cmdname"><code>showHelp(err, cmdName)</code></a></li>
<li><a href="#removedefaulthandlers"><code>removeDefaultHandlers()</code></a></li>
<li><a href="#applyconfigconfig-parsed-src"><code>applyConfig(config, parsed, src)</code></a></li>
<li><a href="#runexecparsed-skipdefault"><code>runExec(parsed, skipDefault)</code></a></li>
<li><a href="#runexecasyncparsed-skipdefault"><code>runExecAsync(parsed, skipDefault)</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#others">Others</a></li>
</ul>
<h3 id="constructorconfig" class="tsd-anchor-link"><code>constructor(config)</code><a href="#constructorconfig" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><code>config</code> is object with:</p>
<ul>
<li><code>name</code> - set the program name. Will auto detect from <code>process.argv</code> if not specified.</li>
<li><code>version</code> - set the program version. Can also set with <a href="#versionv"><code>version</code></a> method.</li>
<li><code>help</code> - custom help option setting. Can also set with <a href="#helpsetting"><code>help</code></a> method.</li>
<li><code>usage</code> - usage message. Can also set with <a href="#usagemsg-cmdusagemsg"><code>usage</code></a> method.</li>
<li><code>cmdUsage</code> - generic usage message for commands. Can also set with <a href="#usagemsg-cmdusagemsg"><code>cmdUsage</code></a> method.</li>
<li><code>skipExec</code> - If true, will not call command <code>exec</code> handlers after parse.</li>
<li><code>skipExecDefault</code> - if true, will not call default command <code>exec</code> handler after parse.
<ul>
<li>In case you need to do something before invoking the <code>exec</code> handlers, you can set these flags and call the <a href="#runexecparsed-skipdefault"><code>runExec(parsed, skipDefault)</code></a> method yourself.</li>
</ul>
</li>
<li><code>output</code> - callback for printing to console. Should take string as param. Default to calling <code>process.stdout.write</code></li>
<li><code>handlers</code> - custom event handlers.</li>
</ul>
<p>The <code>handlers</code> object can specify a function for each of the <a href="#events">events</a> or set it to <code>false</code> to turn off the default handler.</p>
<p>For example, this config will replace handler for <code>parse-fail</code> and turn off the default <code>unknown-option</code> handler.</p>
<pre><code class="js"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">nc</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">NixClap</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-2">handlers:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">&quot;parse-fail&quot;</span><span class="hl-2">:</span><span class="hl-1"> (</span><span class="hl-2">parsed</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> { ... },</span><br/><span class="hl-1">    </span><span class="hl-3">&quot;unknown-option&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-4">false</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<h3 id="versionv" class="tsd-anchor-link"><code>version(v)</code><a href="#versionv" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Set program version with a string. ie: <code>1.0.0</code></p>
<p>Return: The <code>NixClap</code> instance itself.</p>
<blockquote>
<p>Must be called before the <a href="#initoptions-commands"><code>init</code></a> method.</p>
</blockquote>
<h3 id="helpsetting" class="tsd-anchor-link"><code>help(setting)</code><a href="#helpsetting" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Set a custom option setting for invoking help. Default is:</p>
<p>Return: The <code>NixClap</code> instance itself.</p>
<pre><code class="js"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-11">alias</span><span class="hl-1">: </span><span class="hl-3">&quot;h&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-11">desc</span><span class="hl-1">: </span><span class="hl-3">&quot;Show help&quot;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Option name is always <code>help</code>. Call <code>help(false)</code> to turn off the default <code>--help</code> option.</p>
<blockquote>
<p>Must be called before the <a href="#initoptions-commands"><code>init</code></a> method.</p>
</blockquote>
<h3 id="usagemsg-cmdusagemsg" class="tsd-anchor-link"><code>usage(msg)</code>, <code>cmdUsage(msg)</code><a href="#usagemsg-cmdusagemsg" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Set usage message for the program or command, which can be override by individual command's own usage.</p>
<p><code>msg</code> format is any string. <code>$0</code> will be replaced with program name and <code>$1</code> with command name.</p>
<p>Return: The <code>NixClap</code> instance itself.</p>
<blockquote>
<p>Must be called before the <a href="#initoptions-commands"><code>init</code></a> method.</p>
</blockquote>
<h3 id="initoptions-commands" class="tsd-anchor-link"><code>init(options, commands)</code><a href="#initoptions-commands" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Initialize your options and commands</p>
<p>Return: The <code>NixClap</code> instance itself.</p>
<h3 id="defaultcommandname" class="tsd-anchor-link"><code>defaultCommand(name)</code><a href="#defaultcommandname" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Set the default command which is invoked when no command was given in command line.</p>
<ul>
<li>Only one command can be default.</li>
<li>Default command cannot have required args and must have the <code>exec</code> handler</li>
</ul>
<h3 id="parseargv-start-parsed" class="tsd-anchor-link"><code>parse(argv, start, parsed)</code><a href="#parseargv-start-parsed" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Parse command line. Call without any params to parse <code>process.argv</code>.</p>
<p>Return: The parse result object.</p>
<ul>
<li><code>argv</code> - array of CLI args. Defaults to <code>process.argv</code>.</li>
<li><code>start</code> - index for argv from where to start parsing</li>
<li><code>parsed</code> - previous result from <code>parse</code>. If passed, then parsing will add new data to it.</li>
</ul>
<h3 id="parseasyncargv-start-parsed" class="tsd-anchor-link"><code>parseAsync(argv, start, parsed)</code><a href="#parseasyncargv-start-parsed" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>async version of <a href="#parseargv-start-parsed">parse</a>.</p>
<ul>
<li>It will use <a href="#runexecasyncparsed-skipdefault">runExecAsync</a> to invoke command <code>exec</code> handlers serially.</li>
<li>The command handler can return a Promise, which will be awaited.</li>
</ul>
<p>Return: A promise the resolve with the parse result object.</p>
<h3 id="showhelperr-cmdname" class="tsd-anchor-link"><code>showHelp(err, cmdName)</code><a href="#showhelperr-cmdname" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Show help message and then emit <code>exit</code>.</p>
<ul>
<li><code>err</code> - if valid, then <code>err.message</code> will be printed after help message and exit with code <code>1</code>.</li>
<li><code>cmdName</code> - if valid, then will print help for the specific command.</li>
</ul>
<h3 id="removedefaulthandlers" class="tsd-anchor-link"><code>removeDefaultHandlers()</code><a href="#removedefaulthandlers" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Remove NixClap's default handlers for the list of <a href="#events">event names</a>.</p>
<p>If you've replaced the handler through specifying <code>handlers</code> in <code>config</code> for the constructor, then this will not remove your handler.</p>
<p>Return: The <code>NixClap</code> instance itself.</p>
<ul>
<li>You can pass in <code>&quot;*&quot;</code> to remove all default handlers.</li>
<li>You can pass in the event names you want to remove.</li>
</ul>
<p>ie:</p>
<pre><code class="js"><span class="hl-2">nc</span><span class="hl-1">.</span><span class="hl-6">removeDefaultHandlers</span><span class="hl-1">(</span><span class="hl-3">&quot;parse-fail&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;unknown-option&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;unknown-command&quot;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h3 id="applyconfigconfig-parsed-src" class="tsd-anchor-link"><code>applyConfig(config, parsed, src)</code><a href="#applyconfigconfig-parsed-src" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Allow you to apply extra config to the parsed object, overriding any <code>opts</code> with <code>source</code> not start with <code>cli</code>.</p>
<p>For example, you can allow user to specify options in their <code>package.json</code> file, and apply those after the command line is parsed.</p>
<ul>
<li><code>config</code> - Config object containing user options config</li>
<li><code>parsed</code> - The parse result object from NixClap.</li>
<li><code>src</code> - String, source to set if override. Default to <code>user</code></li>
</ul>
<p>Example on applying user config from <code>package.json</code>:</p>
<pre><code class="js"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">pkg</span><span class="hl-1"> = </span><span class="hl-6">require</span><span class="hl-1">(</span><span class="hl-2">path</span><span class="hl-1">.</span><span class="hl-6">resolve</span><span class="hl-1">(</span><span class="hl-3">&quot;package.json&quot;</span><span class="hl-1">));</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">parsed</span><span class="hl-1"> = </span><span class="hl-2">nc</span><span class="hl-1">.</span><span class="hl-6">parse</span><span class="hl-1">();</span><br/><span class="hl-2">nc</span><span class="hl-1">.</span><span class="hl-6">applyConfig</span><span class="hl-1">(</span><span class="hl-2">pkg</span><span class="hl-1">.</span><span class="hl-2">cliConfig</span><span class="hl-1">, </span><span class="hl-2">parsed</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h3 id="runexecparsed-skipdefault" class="tsd-anchor-link"><code>runExec(parsed, skipDefault)</code><a href="#runexecparsed-skipdefault" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Go through the commands in parsed and call their <code>exec</code> handler.</p>
<blockquote>
<p>The <a href="#parseargv-start-parsed"><code>parse</code></a> method will call this at the end unless <code>skipExec</code> flag is set.</p>
</blockquote>
<p>Return: The number of commands with <code>exec</code> was invoked.</p>
<ul>
<li><code>parsed</code> - The parse result object.</li>
<li><code>skipDefault</code> - <code>boolean</code>, if <code>true</code> then do not invoke default command's <code>exec</code> handler when no command with <code>exec</code> handler was given.</li>
</ul>
<h3 id="runexecasyncparsed-skipdefault" class="tsd-anchor-link"><code>runExecAsync(parsed, skipDefault)</code><a href="#runexecasyncparsed-skipdefault" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>async version of <a href="#runexecparsed-skipdefault">runExec</a></p>
<p>Return: A promise that resolve with the number of commands with <code>exec</code> invoked.</p>
<h1 id="others" class="tsd-anchor-link">Others<a href="#others" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><ul>
<li><a href="https://github.com/nodeca/argparse">argparse</a></li>
<li><a href="https://github.com/yargs/yargs">yargs</a></li>
<li><a href="https://github.com/tj/commander.js">commander</a></li>
<li><a href="https://www.npmjs.com/package/optimist">optimist</a></li>
<li><a href="https://github.com/lahmatiy/clap">clap</a></li>
<li><a href="https://github.com/litert/clap.js">clap.js</a></li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#nixclap"><span>Nix<wbr/>Clap</span></a><a href="#features"><span>Features</span></a><a href="#examples"><span>Examples</span></a><ul><li><a href="#more-examples"><span>More <wbr/>Examples</span></a></li></ul><a href="#parsing-capabilities"><span>Parsing <wbr/>Capabilities</span></a><ul><li><a href="#options"><span>Options</span></a></li><li><a href="#commands"><span>Commands</span></a></li><li><ul><li><a href="#multiple-commands"><span>Multiple <wbr/>Commands</span></a></li><li><a href="#sub-commands"><span>Sub <wbr/>Commands</span></a></li></ul></li><li><a href="#greedy-mode"><span>Greedy <wbr/>Mode</span></a></li><li><a href="#terminating-and-resuming"><span>Terminating and <wbr/>Resuming</span></a></li></ul><a href="#install"><span>Install</span></a><a href="#interface"><span>Interface</span></a><ul><li><a href="#options-spec"><span>options spec</span></a></li><li><a href="#commands-spec"><span>commands spec</span></a></li><li><ul><li><a href="#rules-for-command-args"><span>Rules for <wbr/>Command args</span></a></li></ul></li><li><a href="#value-coercion"><span>Value <wbr/>Coercion</span></a></li><li><a href="#parse-result"><span>Parse <wbr/>Result</span></a></li><li><ul><li><a href="#parse-result-command-object"><span>Parse <wbr/>Result <wbr/>Command <wbr/>Object</span></a></li><li><a href="#command-exec-handler"><span>Command exec handler</span></a></li></ul></li><li><a href="#events"><span>Events</span></a></li><li><ul><li><a href="#default-event-handlers"><span>Default <wbr/>Event <wbr/>Handlers</span></a></li><li><ul><li><a href="#skip-default-event-behaviors"><span>Skip <wbr/>Default <wbr/>Event <wbr/>Behaviors</span></a></li></ul></li></ul></li><li><a href="#apis"><span>AP<wbr/>Is</span></a></li><li><ul><li><a href="#constructorconfig"><span>constructor(config)</span></a></li><li><a href="#versionv"><span>version(v)</span></a></li><li><a href="#helpsetting"><span>help(setting)</span></a></li><li><a href="#usagemsg-cmdusagemsg"><span>usage(msg), cmd<wbr/>Usage(msg)</span></a></li><li><a href="#initoptions-commands"><span>init(options, commands)</span></a></li><li><a href="#defaultcommandname"><span>default<wbr/>Command(name)</span></a></li><li><a href="#parseargv-start-parsed"><span>parse(argv, start, parsed)</span></a></li><li><a href="#parseasyncargv-start-parsed"><span>parse<wbr/>Async(argv, start, parsed)</span></a></li><li><a href="#showhelperr-cmdname"><span>show<wbr/>Help(err, cmd<wbr/>Name)</span></a></li><li><a href="#removedefaulthandlers"><span>remove<wbr/>Default<wbr/>Handlers()</span></a></li><li><a href="#applyconfigconfig-parsed-src"><span>apply<wbr/>Config(config, parsed, src)</span></a></li><li><a href="#runexecparsed-skipdefault"><span>run<wbr/>Exec(parsed, skip<wbr/>Default)</span></a></li><li><a href="#runexecasyncparsed-skipdefault"><span>run<wbr/>Exec<wbr/>Async(parsed, skip<wbr/>Default)</span></a></li></ul></li></ul><a href="#others"><span>Others</span></a></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">nix-clap</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
