<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>nix-clap</title><meta name="description" content="Documentation for nix-clap"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">nix-clap</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>nix-clap</h1></div><div class="tsd-panel tsd-typography"><p><a href="https://npmjs.org/package/nix-clap"><img src="https://badge.fury.io/js/nix-clap.svg" alt="NPM version"></a> <a href="https://github.com/jchip/nix-clap/actions/workflows/node.js.yml"><img src="https://github.com/jchip/nix-clap/actions/workflows/node.js.yml/badge.svg" alt="Build Status"></a>
<a href="https://david-dm.org/jchip/nix-clap"><img src="https://david-dm.org/jchip/nix-clap/status.svg" alt="Dependency Status"></a> <a href="https://david-dm.org/jchip/nix-clap?type=dev"><img src="https://david-dm.org/jchip/nix-clap/dev-status.svg" alt="devDependency Status"></a>
<a href="https://coveralls.io/github/jchip/nix-clap?branch=master"><img src="https://coveralls.io/repos/github/jchip/nix-clap/badge.svg?branch=master" alt="coverage"></a></p>
<h1 id="nixclap" class="tsd-anchor-link">NixClap<a href="#nixclap" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>Simple, lightweight, flexible, and comprehensive Un*x Command Line Argument Parsing for Node.js.</p>
<h2 id="features" class="tsd-anchor-link">Features<a href="#features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><strong>Lightweight</strong> - Minimal dependencies (<code>tslib</code>)</li>
<li><strong>Comprehensive</strong> - Full Un*x-style parsing with options, commands, sub-commands, and variadic arguments</li>
<li><strong>Root Command Support</strong> - Define root command behavior directly in init2()</li>
<li><strong>Type-Safe</strong> - Written in TypeScript with full type definitions</li>
<li><strong>Modern</strong> - Dual ESM/CJS support, async/await support, Node.js 20+</li>
<li><strong>Flexible</strong> - JSON-based configuration with support for custom type coercions</li>
<li><strong>Event-Driven</strong> - Extensible event system for customizing behavior</li>
<li><strong>Informative</strong> - Detailed parse results showing argument sources (<code>cli</code>, <code>default</code>, <code>user</code>)</li>
<li><strong>Greedy Mode</strong> - Use <code>-#</code> flag to consume ambiguous arguments</li>
<li><strong>Auto-Generated Help</strong> - Beautiful help text generated from your specs</li>
<li><strong>Bundler-Friendly</strong> - Works with Webpack, Rollup, esbuild, etc.</li>
</ul>
<h2 id="quick-start" class="tsd-anchor-link">Quick Start<a href="#quick-start" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">nix-clap</span>
</code><button type="button">Copy</button></pre>

<h3 id="simple-cli-with-commands" class="tsd-anchor-link">Simple CLI with commands<a href="#simple-cli-with-commands" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="js"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">NixClap</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;nix-clap&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">()</span><br/><span class="hl-1">  .</span><span class="hl-0">version</span><span class="hl-1">(</span><span class="hl-2">&quot;1.0.0&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">init2</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-4">subCommands:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">build:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Build the project&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">cmd</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Building...&quot;</span><span class="hl-1">, </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-4">opts</span><span class="hl-1">, </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-4">args</span><span class="hl-1">)</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-4">test:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Run tests&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">cmd</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Testing...&quot;</span><span class="hl-1">, </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-4">opts</span><span class="hl-1">, </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-4">args</span><span class="hl-1">)</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-0">parse</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<pre><code class="bash"><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">my-cli</span><span class="hl-1"> </span><span class="hl-2">build</span><span class="hl-1">        </span><span class="hl-6"># &quot;Building...&quot;</span><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">my-cli</span><span class="hl-1"> </span><span class="hl-2">test</span><span class="hl-1">         </span><span class="hl-6"># &quot;Testing...&quot;</span><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">my-cli</span><span class="hl-1"> </span><span class="hl-5">--help</span><span class="hl-1">       </span><span class="hl-6"># Shows help</span><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">my-cli</span><span class="hl-1"> </span><span class="hl-5">--version</span><span class="hl-1">    </span><span class="hl-6"># Shows version</span>
</code><button type="button">Copy</button></pre>

<h3 id="cli-with-options" class="tsd-anchor-link">CLI with options<a href="#cli-with-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="js"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">NixClap</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;nix-clap&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">parsed</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">()</span><br/><span class="hl-1">  .</span><span class="hl-0">init2</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-4">options:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">name:</span><span class="hl-1"> { </span><span class="hl-4">alias:</span><span class="hl-1"> </span><span class="hl-2">&quot;n&quot;</span><span class="hl-1">, </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Your name&quot;</span><span class="hl-1">, </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;&lt;string&gt;&quot;</span><span class="hl-1"> }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-0">parse</span><span class="hl-1">();</span><br/><br/><span class="hl-6">// Access parsed options</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">name</span><span class="hl-1"> = </span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">command</span><span class="hl-1">.</span><span class="hl-4">opts</span><span class="hl-1">.</span><span class="hl-4">name</span><span class="hl-1">;</span><br/><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">name</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Hello </span><span class="hl-5">${</span><span class="hl-4">name</span><span class="hl-5">}</span><span class="hl-2">!`</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<pre><code class="bash"><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">my-cli</span><span class="hl-1"> </span><span class="hl-5">--name</span><span class="hl-1"> </span><span class="hl-2">Alice</span><span class="hl-1">    </span><span class="hl-6"># &quot;Hello Alice!&quot;</span><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">my-cli</span><span class="hl-1"> </span><span class="hl-5">-n</span><span class="hl-1"> </span><span class="hl-2">Bob</span><span class="hl-1">          </span><span class="hl-6"># &quot;Hello Bob!&quot;</span>
</code><button type="button">Copy</button></pre>

<h3 id="cli-with-command-arguments" class="tsd-anchor-link">CLI with command arguments<a href="#cli-with-command-arguments" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="js"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">NixClap</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;nix-clap&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">()</span><br/><span class="hl-1">  .</span><span class="hl-0">init2</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-4">subCommands:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">copy:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Copy files&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;&lt;source string&gt; &lt;dest string&gt;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">cmd</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-5">const</span><span class="hl-1"> { </span><span class="hl-7">source</span><span class="hl-1">, </span><span class="hl-7">dest</span><span class="hl-1"> } = </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-4">args</span><span class="hl-1">;</span><br/><span class="hl-1">          </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Copying </span><span class="hl-5">${</span><span class="hl-4">source</span><span class="hl-5">}</span><span class="hl-2"> to </span><span class="hl-5">${</span><span class="hl-4">dest</span><span class="hl-5">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-0">parse</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<pre><code class="bash"><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">my-cli</span><span class="hl-1"> </span><span class="hl-2">copy</span><span class="hl-1"> </span><span class="hl-2">file.txt</span><span class="hl-1"> </span><span class="hl-2">backup.txt</span><br/><span class="hl-6"># &quot;Copying file.txt to backup.txt&quot;</span>
</code><button type="button">Copy</button></pre>

<h3 id="root-command-with-arguments" class="tsd-anchor-link">Root command with arguments<a href="#root-command-with-arguments" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="js"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">NixClap</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;nix-clap&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">({ </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-2">&quot;process&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">  .</span><span class="hl-0">init2</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;&lt;files string..&gt;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">cmd</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">files</span><span class="hl-1"> = </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-4">args</span><span class="hl-1">.</span><span class="hl-4">files</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Processing: </span><span class="hl-5">${</span><span class="hl-4">files</span><span class="hl-8">.</span><span class="hl-0">join</span><span class="hl-8">(</span><span class="hl-2">&quot;, &quot;</span><span class="hl-8">)</span><span class="hl-5">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-0">parse</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<pre><code class="bash"><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">process</span><span class="hl-1"> </span><span class="hl-2">file.txt</span><span class="hl-1">                    </span><span class="hl-6"># &quot;Processing: file.txt&quot;</span><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">process</span><span class="hl-1"> </span><span class="hl-2">file1.txt</span><span class="hl-1"> </span><span class="hl-2">file2.txt</span><span class="hl-1">         </span><span class="hl-6"># &quot;Processing: file1.txt, file2.txt&quot;</span>
</code><button type="button">Copy</button></pre>

<blockquote>
<p><strong>Note:</strong> Root command only executes when:</p>
<ol>
<li>Arguments are provided on the command line, AND</li>
<li>No sub-command matches those arguments</li>
</ol>
<p>This means sub-commands always take precedence. For CLIs that should run without any arguments, use a <a href="#defaultcommandname">default command</a> instead.</p>
</blockquote>
<h3 id="with-commands-and-options" class="tsd-anchor-link">With Commands and Options<a href="#with-commands-and-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="js"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">NixClap</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;nix-clap&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">nc</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">()</span><br/><span class="hl-1">  .</span><span class="hl-0">version</span><span class="hl-1">(</span><span class="hl-2">&quot;1.0.0&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">usage</span><span class="hl-1">(</span><span class="hl-2">&quot;$0 [options] &lt;command&gt; [options]&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">init2</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-4">options:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">verbose:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;enable verbose mode&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">alias:</span><span class="hl-1"> </span><span class="hl-2">&quot;v&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;&lt;flag boolean&gt;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">argDefault:</span><span class="hl-1"> </span><span class="hl-2">&quot;false&quot;</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-4">subCommands:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">compile:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;run compile on the files&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;&lt;files...&gt;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">cmd</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">meta</span><span class="hl-1"> = </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-4">jsonMeta</span><span class="hl-1">;</span><br/><span class="hl-1">          </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;compile&quot;</span><span class="hl-1">, </span><span class="hl-4">meta</span><span class="hl-1">.</span><span class="hl-4">args</span><span class="hl-1">.</span><span class="hl-4">files</span><span class="hl-1">, </span><span class="hl-2">&quot;verbose&quot;</span><span class="hl-1">, </span><span class="hl-4">meta</span><span class="hl-1">.</span><span class="hl-4">opts</span><span class="hl-1">.</span><span class="hl-4">verbose</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  });</span><br/><br/><span class="hl-4">nc</span><span class="hl-1">.</span><span class="hl-0">parse</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<blockquote>
<p><strong>Important:</strong> <code>version()</code>, <code>help()</code>, and <code>usage()</code> must be called <strong>before</strong> <code>init2()</code>.</p>
</blockquote>
<p><strong>Usage:</strong></p>
<pre><code class="bash"><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">my-prog</span><span class="hl-1"> </span><span class="hl-2">compile</span><span class="hl-1"> </span><span class="hl-5">--verbose</span><span class="hl-1"> </span><span class="hl-2">file1.jsx</span><span class="hl-1"> </span><span class="hl-2">file2.jsx</span><span class="hl-1"> </span><span class="hl-2">file3.jsx</span>
</code><button type="button">Copy</button></pre>

<blockquote>
<p>See <a href="media/with-commands.ts">examples/with-commands.ts</a></p>
</blockquote>
<h3 id="asyncawait-support" class="tsd-anchor-link">Async/Await Support<a href="#asyncawait-support" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="js"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">nc</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">().</span><span class="hl-0">init2</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">subCommands:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">deploy:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Deploy to production&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-5">async</span><span class="hl-1"> </span><span class="hl-4">cmd</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">someAsyncOperation</span><span class="hl-1">();</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Deployed!&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">nc</span><span class="hl-1">.</span><span class="hl-0">parseAsync</span><span class="hl-1">(); </span><span class="hl-6">// Use parseAsync for async exec handlers</span>
</code><button type="button">Copy</button></pre>

<blockquote>
<p>See <a href="media/async-await.ts">examples/async-await.ts</a></p>
</blockquote>
<h3 id="accessing-parsed-results" class="tsd-anchor-link">Accessing Parsed Results<a href="#accessing-parsed-results" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>NixClap provides multiple ways to access parsed data:</p>
<pre><code class="js"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">parsed</span><span class="hl-1"> = </span><span class="hl-4">nc</span><span class="hl-1">.</span><span class="hl-0">parse</span><span class="hl-1">();</span><br/><br/><span class="hl-6">// Access via jsonMeta (recommended)</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">opts</span><span class="hl-1"> = </span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">command</span><span class="hl-1">.</span><span class="hl-4">jsonMeta</span><span class="hl-1">.</span><span class="hl-4">opts</span><span class="hl-1">; </span><span class="hl-6">// { verbose: true, output: &quot;file.txt&quot; }</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">args</span><span class="hl-1"> = </span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">command</span><span class="hl-1">.</span><span class="hl-4">jsonMeta</span><span class="hl-1">.</span><span class="hl-4">args</span><span class="hl-1">; </span><span class="hl-6">// { files: [&quot;a.js&quot;, &quot;b.js&quot;] }</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">source</span><span class="hl-1"> = </span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">command</span><span class="hl-1">.</span><span class="hl-4">jsonMeta</span><span class="hl-1">.</span><span class="hl-4">source</span><span class="hl-1">; </span><span class="hl-6">// { verbose: &quot;cli&quot; }</span><br/><br/><span class="hl-6">// Access sub-commands</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">subCmd</span><span class="hl-1"> = </span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">command</span><span class="hl-1">.</span><span class="hl-4">jsonMeta</span><span class="hl-1">.</span><span class="hl-4">subCommands</span><span class="hl-1">.</span><span class="hl-4">compile</span><span class="hl-1">;</span><br/><br/><span class="hl-6">// Check for errors</span><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">errorNodes</span><span class="hl-1"> &amp;&amp; </span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">errorNodes</span><span class="hl-1">.</span><span class="hl-4">length</span><span class="hl-1"> &gt; </span><span class="hl-9">0</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-2">&quot;Parse errors:&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">errorNodes</span><span class="hl-1">.</span><span class="hl-0">map</span><span class="hl-1">(</span><span class="hl-4">n</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-4">n</span><span class="hl-1">.</span><span class="hl-4">error</span><span class="hl-1">.</span><span class="hl-4">message</span><span class="hl-1">)</span><br/><span class="hl-1">  );</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Understanding <code>opts</code> vs <code>optsFull</code></strong></p>
<p>NixClap provides two ways to access option values:</p>
<p><strong><code>opts</code> - Simplified Direct Values (Recommended)</strong></p>
<p>The first/only argument value is stored directly on the option name:</p>
<pre><code class="js"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">nc</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">().</span><span class="hl-0">init2</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">options:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">output:</span><span class="hl-1"> { </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;&lt;path string&gt;&quot;</span><span class="hl-1">, </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Output file&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">    </span><span class="hl-4">count:</span><span class="hl-1"> { </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;&lt;num number&gt;&quot;</span><span class="hl-1">, </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Item count&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">    </span><span class="hl-4">format:</span><span class="hl-1"> { </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;&lt;fmt&gt;&quot;</span><span class="hl-1">, </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Output format&quot;</span><span class="hl-1"> }</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">cmd</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">meta</span><span class="hl-1"> = </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-4">jsonMeta</span><span class="hl-1">;</span><br/><br/><span class="hl-1">    </span><span class="hl-6">// ✅ Correct - access values directly</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">output</span><span class="hl-1"> = </span><span class="hl-4">meta</span><span class="hl-1">.</span><span class="hl-4">opts</span><span class="hl-1">.</span><span class="hl-4">output</span><span class="hl-1">; </span><span class="hl-6">// &quot;file.txt&quot;</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">count</span><span class="hl-1"> = </span><span class="hl-4">meta</span><span class="hl-1">.</span><span class="hl-4">opts</span><span class="hl-1">.</span><span class="hl-4">count</span><span class="hl-1">; </span><span class="hl-6">// 42</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">format</span><span class="hl-1"> = </span><span class="hl-4">meta</span><span class="hl-1">.</span><span class="hl-4">opts</span><span class="hl-1">.</span><span class="hl-4">format</span><span class="hl-1">; </span><span class="hl-6">// &quot;json&quot;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p><strong><code>optsFull</code> - Complete Objects with Argument Names</strong></p>
<p>All arguments are stored with both positional index and their named arguments:</p>
<pre><code class="js"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">nc</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">().</span><span class="hl-0">init2</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">options:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">output:</span><span class="hl-1"> { </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;&lt;path string&gt;&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">    </span><span class="hl-4">count:</span><span class="hl-1"> { </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;&lt;num number&gt;&quot;</span><span class="hl-1"> }</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">cmd</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">meta</span><span class="hl-1"> = </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-4">jsonMeta</span><span class="hl-1">;</span><br/><br/><span class="hl-1">    </span><span class="hl-6">// Access by argument name</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">path</span><span class="hl-1"> = </span><span class="hl-4">meta</span><span class="hl-1">.</span><span class="hl-4">optsFull</span><span class="hl-1">.</span><span class="hl-4">output</span><span class="hl-1">?.</span><span class="hl-4">path</span><span class="hl-1">; </span><span class="hl-6">// &quot;file.txt&quot;</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">num</span><span class="hl-1"> = </span><span class="hl-4">meta</span><span class="hl-1">.</span><span class="hl-4">optsFull</span><span class="hl-1">.</span><span class="hl-4">count</span><span class="hl-1">?.</span><span class="hl-4">num</span><span class="hl-1">; </span><span class="hl-6">// 42</span><br/><br/><span class="hl-1">    </span><span class="hl-6">// Or by positional index</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">first</span><span class="hl-1"> = </span><span class="hl-4">meta</span><span class="hl-1">.</span><span class="hl-4">optsFull</span><span class="hl-1">.</span><span class="hl-4">output</span><span class="hl-1">?.[</span><span class="hl-9">0</span><span class="hl-1">]; </span><span class="hl-6">// &quot;file.txt&quot;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p><strong>Structure comparison:</strong></p>
<pre><code class="js"><span class="hl-6">// Given: --output result.txt --count 42</span><br/><br/><span class="hl-6">// meta.opts (simplified)</span><br/><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-10">output</span><span class="hl-1">: </span><span class="hl-2">&quot;result.txt&quot;</span><span class="hl-1">,   </span><span class="hl-6">// Direct value</span><br/><span class="hl-1">  </span><span class="hl-10">count</span><span class="hl-1">: </span><span class="hl-9">42</span><span class="hl-1">               </span><span class="hl-6">// Direct value</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">// meta.optsFull (complete)</span><br/><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-10">output</span><span class="hl-1">: {</span><br/><span class="hl-1">    </span><span class="hl-9">0</span><span class="hl-1">: </span><span class="hl-2">&quot;result.txt&quot;</span><span class="hl-1">,      </span><span class="hl-6">// Positional</span><br/><span class="hl-1">    </span><span class="hl-10">path</span><span class="hl-1">: </span><span class="hl-2">&quot;result.txt&quot;</span><span class="hl-1">    </span><span class="hl-6">// Named from args: &quot;&lt;path string&gt;&quot;</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-10">count</span><span class="hl-1">: {</span><br/><span class="hl-1">    </span><span class="hl-9">0</span><span class="hl-1">: </span><span class="hl-9">42</span><span class="hl-1">,                </span><span class="hl-6">// Positional</span><br/><span class="hl-1">    </span><span class="hl-10">num</span><span class="hl-1">: </span><span class="hl-9">42</span><span class="hl-1">               </span><span class="hl-6">// Named from args: &quot;&lt;num number&gt;&quot;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Common mistake:</strong></p>
<pre><code class="js"><span class="hl-6">// ❌ WRONG - trying to access argument name on simplified value</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">output</span><span class="hl-1"> = </span><span class="hl-4">meta</span><span class="hl-1">.</span><span class="hl-4">opts</span><span class="hl-1">.</span><span class="hl-4">output</span><span class="hl-1">?.</span><span class="hl-4">path</span><span class="hl-1">; </span><span class="hl-6">// undefined! (output is a string)</span><br/><br/><span class="hl-6">// ✅ CORRECT - use optsFull for argument names</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">output</span><span class="hl-1"> = </span><span class="hl-4">meta</span><span class="hl-1">.</span><span class="hl-4">optsFull</span><span class="hl-1">.</span><span class="hl-4">output</span><span class="hl-1">?.</span><span class="hl-4">path</span><span class="hl-1">; </span><span class="hl-6">// &quot;file.txt&quot;</span><br/><br/><span class="hl-6">// ✅ BETTER - use opts for simplicity</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">output</span><span class="hl-1"> = </span><span class="hl-4">meta</span><span class="hl-1">.</span><span class="hl-4">opts</span><span class="hl-1">.</span><span class="hl-4">output</span><span class="hl-1">; </span><span class="hl-6">// &quot;file.txt&quot;</span>
</code><button type="button">Copy</button></pre>

<blockquote>
<p>See <a href="media/accessing-parsed-results.ts">examples/accessing-parsed-results.ts</a></p>
</blockquote>
<h2 id="understanding-init-vs-init2" class="tsd-anchor-link">Understanding init() vs init2()<a href="#understanding-init-vs-init2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>NixClap provides two initialization methods. <strong><code>init2()</code> is the recommended primary API</strong>, while <code>init()</code> is a convenience wrapper for simple cases.</p>
<h3 id="use-init2-recommended" class="tsd-anchor-link">Use <code>init2()</code> (Recommended)<a href="#use-init2-recommended" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><code>init2()</code> is the modern, flexible API that allows you to define everything in one place:</p>
<pre><code class="js"><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">().</span><span class="hl-0">init2</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;[files string..]&quot;</span><span class="hl-1">, </span><span class="hl-6">// Root command arguments</span><br/><span class="hl-1">  </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">cmd</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">/* ... */</span><br/><span class="hl-1">  }, </span><span class="hl-6">// Root command handler</span><br/><span class="hl-1">  </span><span class="hl-4">options:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">/* ... */</span><br/><span class="hl-1">  }, </span><span class="hl-6">// Global options</span><br/><span class="hl-1">  </span><span class="hl-4">subCommands:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">/* ... */</span><br/><span class="hl-1">  } </span><span class="hl-6">// Sub-commands</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p><strong>Benefits:</strong></p>
<ul>
<li>✅ Define root command behavior (args + exec) directly</li>
<li>✅ Single, declarative configuration object</li>
<li>✅ More intuitive and consistent API</li>
<li>✅ Full control over root command execution</li>
</ul>
<p><strong>When to use:</strong></p>
<ul>
<li>You need root command to handle arguments directly (e.g., <code>mycli file.txt</code>)</li>
<li>You want a clean, declarative configuration</li>
<li>You're building any CLI (simple or complex)</li>
</ul>
<h3 id="use-init-legacyconvenience" class="tsd-anchor-link">Use <code>init()</code> (Legacy/Convenience)<a href="#use-init-legacyconvenience" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><code>init()</code> is a simpler wrapper that's useful for backwards compatibility or when you only need options and sub-commands:</p>
<pre><code class="js"><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">().</span><span class="hl-0">init</span><span class="hl-1">(</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-6">/* options */</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-6">/* commands */</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>This is equivalent to:</p>
<pre><code class="js"><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">().</span><span class="hl-0">init2</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">options:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">/* options */</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-4">subCommands:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">/* commands */</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p><strong>When to use:</strong></p>
<ul>
<li>Maintaining existing code that uses <code>init()</code></li>
<li>Very simple CLIs with just options and commands</li>
<li>You prefer two separate parameters over one object</li>
</ul>
<blockquote>
<p><strong>Tip:</strong> When in doubt, use <code>init2()</code> - it's more flexible and is the recommended approach going forward.</p>
</blockquote>
<p><strong>Complete Example:</strong></p>
<pre><code class="js"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">NixClap</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;nix-clap&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">nc</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">({ </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-2">&quot;file-processor&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">  .</span><span class="hl-0">version</span><span class="hl-1">(</span><span class="hl-2">&quot;1.0.0&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">usage</span><span class="hl-1">(</span><span class="hl-2">&quot;$0 [options] &lt;input-file&gt; [additional-files...]&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">init2</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-6">// Root command arguments</span><br/><span class="hl-1">    </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;[inputFile string] [additionalFiles string..]&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">// Root command execution handler</span><br/><span class="hl-1">    </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">cmd</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">meta</span><span class="hl-1"> = </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-4">jsonMeta</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Processing:&quot;</span><span class="hl-1">, </span><span class="hl-4">meta</span><span class="hl-1">.</span><span class="hl-4">args</span><span class="hl-1">.</span><span class="hl-4">inputFile</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Additional files:&quot;</span><span class="hl-1">, </span><span class="hl-4">meta</span><span class="hl-1">.</span><span class="hl-4">args</span><span class="hl-1">.</span><span class="hl-4">additionalFiles</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Output:&quot;</span><span class="hl-1">, </span><span class="hl-4">meta</span><span class="hl-1">.</span><span class="hl-4">opts</span><span class="hl-1">.</span><span class="hl-4">output</span><span class="hl-1">);</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-6">// Root-level options (available to root command and sub-commands)</span><br/><span class="hl-1">    </span><span class="hl-4">options:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">output:</span><span class="hl-1"> { </span><span class="hl-4">alias:</span><span class="hl-1"> </span><span class="hl-2">&quot;o&quot;</span><span class="hl-1">, </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Output file path&quot;</span><span class="hl-1">, </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;&lt;path string&gt;&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">      </span><span class="hl-4">verbose:</span><span class="hl-1"> { </span><span class="hl-4">alias:</span><span class="hl-1"> </span><span class="hl-2">&quot;v&quot;</span><span class="hl-1">, </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Enable verbose output&quot;</span><span class="hl-1"> }</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-6">// Sub-commands (optional)</span><br/><span class="hl-1">    </span><span class="hl-4">subCommands:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">convert:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Convert file format&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;&lt;input string&gt; &lt;output string&gt;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">cmd</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Converting...&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  });</span><br/><br/><span class="hl-4">nc</span><span class="hl-1">.</span><span class="hl-0">parse</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<p><strong>Usage examples:</strong></p>
<pre><code class="bash"><span class="hl-6"># Root command (direct file processing)</span><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">file-processor</span><span class="hl-1"> </span><span class="hl-2">input.txt</span><span class="hl-1"> </span><span class="hl-5">--output</span><span class="hl-1"> </span><span class="hl-2">result.txt</span><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">file-processor</span><span class="hl-1"> </span><span class="hl-2">file1.txt</span><span class="hl-1"> </span><span class="hl-2">file2.txt</span><span class="hl-1"> </span><span class="hl-2">file3.txt</span><span class="hl-1"> </span><span class="hl-5">--verbose</span><br/><br/><span class="hl-6"># Sub-commands still work</span><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">file-processor</span><span class="hl-1"> </span><span class="hl-2">convert</span><span class="hl-1"> </span><span class="hl-2">input.txt</span><span class="hl-1"> </span><span class="hl-2">output.txt</span><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">file-processor</span><span class="hl-1"> </span><span class="hl-5">--help</span>
</code><button type="button">Copy</button></pre>

<p><strong>Important notes:</strong></p>
<ul>
<li>Root command arguments should typically be <strong>optional</strong> (<code>[arg]</code>) rather than required (<code>&lt;arg&gt;</code>) to avoid parsing ambiguity with sub-command names</li>
<li>Sub-commands always take precedence during parsing</li>
<li>The root command only executes when:
<ul>
<li>Arguments are provided on the command line, AND</li>
<li>No sub-commands match those arguments</li>
</ul>
</li>
<li>When multiple non-option arguments are provided, they are checked sequentially. If any argument matches a sub-command name, that sub-command executes (and subsequent arguments are ignored for root command execution)</li>
<li>If none of the non-option arguments match sub-command names, <strong>all</strong> arguments are passed to the root command</li>
<li>All options defined in <code>init2()</code> are available to both the root command and sub-commands</li>
</ul>
<h3 id="root-command-execution-decision-tree" class="tsd-anchor-link">Root Command Execution Decision Tree<a href="#root-command-execution-decision-tree" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>When you configure a root command with <code>exec</code> and <code>args</code>, NixClap determines whether to execute it based on this logic:</p>
<pre><code><span class="hl-4">Preprocess</span><span class="hl-1"> </span><span class="hl-7">CLI</span><span class="hl-1"> </span><span class="hl-5">arguments</span><br/><span class="hl-1">   ↓</span><br/><span class="hl-4">Are</span><span class="hl-1"> </span><span class="hl-4">there</span><span class="hl-1"> </span><span class="hl-4">only</span><span class="hl-1"> </span><span class="hl-4">option</span><span class="hl-1"> </span><span class="hl-0">args</span><span class="hl-1"> (</span><span class="hl-4">no</span><span class="hl-1"> </span><span class="hl-4">non</span><span class="hl-1">-</span><span class="hl-4">option</span><span class="hl-1"> </span><span class="hl-4">args</span><span class="hl-1">)?</span><br/><span class="hl-1">   ├─ </span><span class="hl-7">YES</span><span class="hl-1"> → </span><span class="hl-4">Insert</span><span class="hl-1"> </span><span class="hl-4">default</span><span class="hl-1"> </span><span class="hl-4">command</span><span class="hl-1"> </span><span class="hl-0">upfront</span><span class="hl-1"> (</span><span class="hl-4">if</span><span class="hl-1"> </span><span class="hl-4">configured</span><span class="hl-1">)</span><br/><span class="hl-1">   └─ </span><span class="hl-7">NO</span><span class="hl-1"> → </span><span class="hl-4">Continue</span><span class="hl-1"> </span><span class="hl-4">parsing</span><span class="hl-1"> </span><span class="hl-4">normally</span><br/><span class="hl-1">       ↓</span><br/><span class="hl-4">Parse</span><span class="hl-1"> </span><span class="hl-7">CLI</span><span class="hl-1"> </span><span class="hl-5">arguments</span><br/><span class="hl-1">   ↓</span><br/><span class="hl-4">Does</span><span class="hl-1"> </span><span class="hl-4">a</span><span class="hl-1"> </span><span class="hl-4">sub</span><span class="hl-1">-</span><span class="hl-4">command</span><span class="hl-1"> </span><span class="hl-4">match</span><span class="hl-1">?</span><br/><span class="hl-1">   ├─ </span><span class="hl-7">YES</span><span class="hl-1"> → </span><span class="hl-4">Execute</span><span class="hl-1"> </span><span class="hl-4">matched</span><span class="hl-1"> </span><span class="hl-4">sub</span><span class="hl-1">-</span><span class="hl-0">command</span><span class="hl-1"> (</span><span class="hl-4">root</span><span class="hl-1"> </span><span class="hl-4">command</span><span class="hl-1"> </span><span class="hl-4">skipped</span><span class="hl-1">)</span><br/><span class="hl-1">   └─ </span><span class="hl-7">NO</span><span class="hl-1"> → </span><span class="hl-4">Continue</span><span class="hl-1"> </span><span class="hl-4">to</span><span class="hl-1"> </span><span class="hl-4">next</span><span class="hl-1"> </span><span class="hl-4">check</span><br/><span class="hl-1">       ↓</span><br/><span class="hl-1">   </span><span class="hl-4">Are</span><span class="hl-1"> </span><span class="hl-4">non</span><span class="hl-1">-</span><span class="hl-4">option</span><span class="hl-1"> </span><span class="hl-5">arguments</span><span class="hl-1"> </span><span class="hl-4">provided</span><span class="hl-1">?</span><br/><span class="hl-1">       ├─ </span><span class="hl-7">NO</span><span class="hl-1"> → </span><span class="hl-4">Execute</span><span class="hl-1"> </span><span class="hl-4">default</span><span class="hl-1"> </span><span class="hl-0">command</span><span class="hl-1"> (</span><span class="hl-4">if</span><span class="hl-1"> </span><span class="hl-4">inserted</span><span class="hl-1"> </span><span class="hl-4">during</span><span class="hl-1"> </span><span class="hl-4">parsing</span><span class="hl-1">)</span><br/><span class="hl-1">       │        └─ </span><span class="hl-4">No</span><span class="hl-1"> </span><span class="hl-4">default</span><span class="hl-1">? → </span><span class="hl-4">Emit</span><span class="hl-1"> </span><span class="hl-2">&#39;no-action&#39;</span><span class="hl-1"> </span><span class="hl-4">event</span><br/><span class="hl-1">       └─ </span><span class="hl-7">YES</span><span class="hl-1"> → </span><span class="hl-4">Execute</span><span class="hl-1"> </span><span class="hl-4">root</span><span class="hl-1"> </span><span class="hl-4">command</span>
</code><button>Copy</button></pre>

<p><strong>Key Points:</strong></p>
<ol>
<li><strong>Sub-commands always win</strong>: If any argument matches a sub-command name, that sub-command executes</li>
<li><strong>Root needs arguments</strong>: Root command only executes when non-option arguments are provided</li>
<li><strong>Default command insertion</strong>: When only option args exist, default command is inserted during preprocessing (before parsing)</li>
<li><strong>Execution order</strong>: Sub-commands → Root command (when args provided) → Default command (inserted during parsing, executed automatically)</li>
</ol>
<p><strong>Example Scenarios:</strong></p>
<pre><code class="bash"><span class="hl-6"># CLI defined with: init2({ args: &quot;[file]&quot;, exec: rootHandler, subCommands: { build: {...} } })</span><br/><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">mycli</span><span class="hl-1"> </span><span class="hl-2">file.txt</span><span class="hl-1">          </span><span class="hl-6"># ✅ Executes root command (no sub-command match, args provided)</span><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">mycli</span><span class="hl-1"> </span><span class="hl-2">build</span><span class="hl-1">             </span><span class="hl-6"># ✅ Executes &#39;build&#39; sub-command (sub-command match)</span><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">mycli</span><span class="hl-1">                   </span><span class="hl-6"># ❌ No execution (no args, no default command)</span><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">mycli</span><span class="hl-1"> </span><span class="hl-5">--help</span><span class="hl-1">            </span><span class="hl-6"># ⚠️  Shows help (--help is handled before execution logic)</span>
</code><button type="button">Copy</button></pre>

<p><strong>Multiple Arguments with Sub-Commands:</strong></p>
<p>When multiple non-option arguments are provided and none match sub-command names, all arguments are passed to the root command:</p>
<pre><code class="bash"><span class="hl-6"># CLI defined with: init2({ </span><br/><span class="hl-6">#   args: &quot;[arg1 string] [arg2 string] [arg3 string]&quot;, </span><br/><span class="hl-6">#   exec: rootHandler, </span><br/><span class="hl-6">#   subCommands: { build: {...}, test: {...} } </span><br/><span class="hl-6"># })</span><br/><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">mycli</span><span class="hl-1"> </span><span class="hl-2">arg1</span><span class="hl-1"> </span><span class="hl-2">arg2</span><span class="hl-1"> </span><span class="hl-2">arg3</span><span class="hl-1">    </span><span class="hl-6"># ✅ Executes root command with all 3 args</span><br/><span class="hl-1">                          </span><span class="hl-6">#    (none match &#39;build&#39; or &#39;test&#39;, so all go to root)</span><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">mycli</span><span class="hl-1"> </span><span class="hl-2">build</span><span class="hl-1">             </span><span class="hl-6"># ✅ Executes &#39;build&#39; sub-command (first arg matches)</span><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">mycli</span><span class="hl-1"> </span><span class="hl-2">arg1</span><span class="hl-1"> </span><span class="hl-2">build</span><span class="hl-1">        </span><span class="hl-6"># ✅ Executes &#39;build&#39; sub-command (second arg matches)</span><br/><span class="hl-1">                          </span><span class="hl-6">#    (arg1 is ignored, only &#39;build&#39; executes)</span>
</code><button type="button">Copy</button></pre>

<blockquote>
<p><strong>Try the examples above:</strong> <a href="media/simple-cli.ts">simple-cli.ts</a>, <a href="media/cli-with-options.ts">cli-with-options.ts</a>, <a href="media/cli-command-args.ts">cli-command-args.ts</a>, <a href="media/simple-root-command.ts">simple-root-command.ts</a></p>
</blockquote>
<h2 id="more-examples" class="tsd-anchor-link">More Examples<a href="#more-examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>See <a href="media/examples">examples</a> folder for more working samples:</p>
<p><strong>Getting Started:</strong></p>
<ul>
<li><a href="media/quick-start.ts">quick-start.ts</a> - Minimal quick start example</li>
<li><a href="media/simple-cli.ts">simple-cli.ts</a> - Simple CLI with commands</li>
<li><a href="media/cli-with-options.ts">cli-with-options.ts</a> - CLI with options</li>
<li><a href="media/cli-command-args.ts">cli-command-args.ts</a> - Commands with arguments</li>
</ul>
<p><strong>Root Commands:</strong></p>
<ul>
<li><a href="media/simple-root-command.ts">simple-root-command.ts</a> - Simple root command</li>
<li><a href="media/root-command.ts">root-command.ts</a> - Comprehensive root command example</li>
</ul>
<p><strong>Options and Arguments:</strong></p>
<ul>
<li><a href="media/options.ts">options.ts</a> - Various option patterns</li>
<li><a href="media/options-only.ts">options-only.ts</a> - Options without commands</li>
<li><a href="media/with-commands.ts">with-commands.ts</a> - Commands with options and arguments</li>
<li><a href="media/value-coercion.ts">value-coercion.ts</a> - Custom value coercion</li>
<li><a href="media/numbers.ts">numbers.ts</a> - Numeric arguments and operations</li>
</ul>
<p><strong>Advanced Features:</strong></p>
<ul>
<li><a href="media/async-await.ts">async-await.ts</a> - Async command handlers</li>
<li><a href="media/default-command.ts">default-command.ts</a> - Using default commands</li>
<li><a href="media/accessing-parsed-results.ts">accessing-parsed-results.ts</a> - Working with parsed data</li>
<li><a href="media/unknowns.ts">unknowns.ts</a> - Handling unknown options</li>
<li><a href="media/unknowns-cmd-only.ts">unknowns-cmd-only.ts</a> - Unknown commands only</li>
<li><a href="media/unknown-multi-cmds.ts">unknown-multi-cmds.ts</a> - Multiple unknown commands</li>
</ul>
<p><strong>TypeScript:</strong></p>
<ul>
<li><a href="media/typescript-usage.ts">typescript-usage.ts</a> - TypeScript integration</li>
</ul>
<h1 id="parsing-capabilities" class="tsd-anchor-link">Parsing Capabilities<a href="#parsing-capabilities" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>NixClap implements comprehensive Un*x-style CLI parsing with several unique design principles:</p>
<p><strong>Core Philosophy:</strong></p>
<ul>
<li><strong>Command-Centric Architecture</strong>: Everything revolves around commands - they own their arguments, options, and execution logic
<ul>
<li>Commands are first-class entities, not just strings that trigger functions</li>
<li>Each command maintains its own parse state, arguments, and options context</li>
<li>Options and arguments are scoped to and processed within their command context</li>
</ul>
</li>
<li><strong>Flexibility First</strong>: Commands, options, and arguments can be freely mixed and composed</li>
<li><strong>Intuitive Un*x Conventions</strong>: Follows traditional Unix CLI patterns that users expect</li>
<li><strong>Explicit Over Implicit</strong>: Uses terminators (<code>-.</code>, <code>--.</code>, <code>--</code>) to resolve ambiguity rather than guessing</li>
<li><strong>Type Safety</strong>: Built-in type coercion with custom type support</li>
<li><strong>Non-Greedy by Default</strong>: Respects command/option boundaries unless explicitly told otherwise (greedy mode)</li>
</ul>
<p><strong>Unique Aspects:</strong></p>
<ol>
<li>
<p><strong>Command-Centric Parsing &amp; Execution</strong>: Unlike option-centric parsers, NixClap treats commands as the organizing principle</p>
<ul>
<li>Options belong to commands (not the other way around)</li>
<li>Parse results are structured as a command tree with nested contexts</li>
<li>Each command has its own <code>jsonMeta</code> containing its args, options, and state</li>
<li>This enables complex command hierarchies with clean separation of concerns</li>
</ul>
</li>
<li>
<p><strong>Multiple Commands in One Invocation</strong>: Execute multiple commands in a single CLI call</p>
<ul>
<li>Example: <code>prog add 1 2 -. mult 3 4</code> executes both <code>add</code> and <code>mult</code> commands</li>
<li>Each command maintains its own arguments and options context</li>
<li>Results accessible as a flat list or via command tree traversal</li>
</ul>
</li>
<li>
<p><strong>Flexible Command Hierarchies</strong>: Commands can have sub-commands, sub-sub-commands, and each level can have its own options</p>
<ul>
<li>Options can be bound to specific commands or available globally</li>
<li>Options can appear before or after commands</li>
<li>Each command level is parsed independently with its own context</li>
</ul>
</li>
<li>
<p><strong>Smart Argument Termination</strong>: Variadic arguments are automatically terminated by:</p>
<ul>
<li>The next option flag (e.g., <code>-x</code> or <code>--foo</code>)</li>
<li>The next command name</li>
<li>Explicit terminators (<code>-.</code> or <code>--.</code>)</li>
<li>This eliminates ambiguity without requiring special syntax</li>
</ul>
</li>
<li>
<p><strong>Greedy Mode Control</strong>: When you need to pass arbitrary strings that look like commands/options as arguments</p>
<ul>
<li>Use <code>-#</code>, <code>-</code>, or <code>---</code> to enter greedy mode</li>
<li>Everything after becomes an argument until terminator</li>
</ul>
</li>
<li>
<p><strong>Execution Model</strong>: NixClap separates parsing from execution</p>
<ul>
<li>Parse once, access results multiple times via command tree</li>
<li>Control when/if commands execute (via <code>skipExec</code>)</li>
<li>Async execution support with proper ordering and command context</li>
<li>Each command's exec handler receives its own CommandNode with full context</li>
</ul>
</li>
</ol>
<h2 id="options" class="tsd-anchor-link">Options<a href="#options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Example: <code>prog -xazvf=hello --foo-option hello bar -. --enable-blah</code></p>
<ul>
<li>Support <code>-</code> single char options or <code>--</code> long form options.</li>
<li>Options can have aliases.</li>
<li>Both option forms can have argument specified with <code>=</code> or space.
<ul>
<li>ie: long form <code>--foo-option=bar</code> or <code>--foo-option bar</code></li>
<li>ie: short form <code>-f=bar</code> or <code>-f bar</code></li>
</ul>
</li>
<li>Both option forms can have variadic array args.
<ul>
<li>ie: <code>--foo-option hello bar</code> or <code>-f hello bar</code></li>
<li>array args can have an optional type</li>
</ul>
</li>
<li><code>-</code> options can be compounded, like <code>-xazvf</code>.
<ul>
<li>Last char can have args, like <code>-xazvf=hello</code> or <code>-xazvf hello</code>.</li>
<li>Other chars are treated as <code>boolean</code> options automatically.</li>
</ul>
</li>
<li>Variadic array args are terminated by any other options such as <code>-x</code> or <code>--xyz</code>, or explicitly with <code>-.</code> or <code>--.</code>
<ul>
<li>ie: <code>cmd1 arg1 arg2 --some-array abc def ghi -. cmd2 arg1 arg2</code>.</li>
</ul>
</li>
<li>Allow arbitrary unknown options but with arguments specified through <code>=</code> only.
<ul>
<li>Since it's ambiguous whether to take a non-option arg following an unknown option as an argument or a command.</li>
</ul>
</li>
</ul>
<h3 id="unknown-options-behavior" class="tsd-anchor-link">Unknown Options Behavior<a href="#unknown-options-behavior" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>When <code>allowUnknownOption</code> is enabled, unknown options follow a specific resolution pattern:</p>
<p><strong>Option Resolution: Unknown options bubble up to parent commands</strong></p>
<p>Unknown options are first attempted to be resolved on the current command. If not found, they bubble up to parent commands until reaching the root command. This allows sub-commands to inherit options from their parents while still allowing command-specific overrides.</p>
<p><strong>Root Command Storage: The root command stores unknown options</strong></p>
<p>If an unknown option cannot be resolved on any command in the hierarchy, it gets stored on the root command (when <code>allowUnknownOption: true</code>). This makes the root command the central repository for all unrecognized options.</p>
<p><strong>Access Pattern: Use <code>cmd.rootCmd.opts</code> to access parent/root command options</strong></p>
<p>To access options that may be stored on parent commands or the root:</p>
<pre><code class="js"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">nc</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">({ </span><span class="hl-4">allowUnknownOption:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1"> }).</span><span class="hl-0">init2</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">subCommands:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">build:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">cmd</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-6">// Access options from current command</span><br/><span class="hl-1">        </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">localOpts</span><span class="hl-1"> = </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-4">opts</span><span class="hl-1">;</span><br/><br/><span class="hl-1">        </span><span class="hl-6">// Access options from root command (includes bubbled up unknown options)</span><br/><span class="hl-1">        </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">rootOpts</span><span class="hl-1"> = </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-4">rootCmd</span><span class="hl-1">.</span><span class="hl-4">opts</span><span class="hl-1">;</span><br/><br/><span class="hl-1">        </span><span class="hl-6">// Combine or prioritize as needed</span><br/><span class="hl-1">        </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">verbose</span><span class="hl-1"> = </span><span class="hl-4">localOpts</span><span class="hl-1">.</span><span class="hl-4">verbose</span><span class="hl-1"> || </span><span class="hl-4">rootOpts</span><span class="hl-1">.</span><span class="hl-4">verbose</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Verbose:&quot;</span><span class="hl-1">, </span><span class="hl-4">verbose</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p><strong>Example:</strong></p>
<pre><code class="bash"><span class="hl-6"># Unknown option --custom-flag bubbles up to root command</span><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">my-cli</span><span class="hl-1"> </span><span class="hl-2">build</span><span class="hl-1"> </span><span class="hl-5">--custom-flag=value</span><br/><br/><span class="hl-6"># In the build command exec handler:</span><br/><span class="hl-0">exec</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-2">cmd</span><span class="hl-1"> =&gt; </span><span class="hl-2">{</span><br/><span class="hl-1">  </span><span class="hl-0">console.log(cmd.opts.customFlag</span><span class="hl-1">);        </span><span class="hl-0">//</span><span class="hl-1"> </span><span class="hl-2">undefined</span><span class="hl-1"> (not </span><span class="hl-2">on</span><span class="hl-1"> </span><span class="hl-2">build</span><span class="hl-1"> </span><span class="hl-2">command</span><span class="hl-1">)</span><br/><span class="hl-1">  </span><span class="hl-0">console.log(cmd.rootCmd.opts.customFlag</span><span class="hl-1">); </span><span class="hl-0">//</span><span class="hl-1"> </span><span class="hl-2">&quot;value&quot;</span><span class="hl-1"> (stored </span><span class="hl-2">on</span><span class="hl-1"> </span><span class="hl-2">root</span><span class="hl-1">)</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>This behavior enables flexible option inheritance while maintaining command-specific option isolation.</p>
<ul>
<li>Counting number of option occurrences.</li>
<li>Boolean option can be negated with <code>--no-</code> prefix.</li>
<li>Allow custom value type coercions with a function or RegExp.</li>
</ul>
<h2 id="commands" class="tsd-anchor-link">Commands<a href="#commands" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Example: <code>prog add 1 2 3 4</code></p>
<ul>
<li>Commands can have optional or required arguments.
<ul>
<li>Each argument type defaults to <code>string</code>, but can have an optional type</li>
</ul>
</li>
<li>Commands can have aliases.</li>
<li>Possible to specify multiple commands.</li>
<li>Commands can have variadic array arguments.</li>
<li>Variadic array args are terminated by any other options such as <code>-x</code> or <code>--xyz</code>, or explicitly with <code>-.</code> or <code>--.</code>
<ul>
<li>ie: <code>prog order pizza soda -. pickup</code> (specifies two commands: <code>order</code> and <code>pickup</code>)</li>
</ul>
</li>
<li>Command can have its own options that are binded to it only.</li>
<li>Top level options can be binded to specific commands only.</li>
<li>Unbind top level options can be specified before or after commands.</li>
<li>Allow arbitrary unknown commands that do not have arguments.</li>
<li>Allow multiple custom value type coercions for each command.</li>
</ul>
<h3 id="multiple-commands" class="tsd-anchor-link">Multiple Commands<a href="#multiple-commands" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Example: <code>prog add 1 2 3 4 -. mult 4 5 6 7 8</code></p>
<blockquote>
<p>First Command: <code>add</code> with four numbers input
Second Command: <code>mult</code> with five numbers input</p>
</blockquote>
<ul>
<li>Since there are multiple commands with variadic arguments, the <code>-.</code> in the middle terminates the <code>add</code> command.</li>
</ul>
<h3 id="sub-commands" class="tsd-anchor-link">Sub Commands<a href="#sub-commands" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Example: <code>prog calc add 1 2 3 4 -. mult 4 5 6 7</code></p>
<blockquote>
<p>Main command: <code>calc</code>
Sub Command: <code>add</code> that can take variadic number of numbers
Sub Command: <code>mult</code> that can take variadic number of numbers</p>
</blockquote>
<ul>
<li>Since there are multiple sub commands, the <code>-.</code> in the middle terminates the <code>add</code> sub command.</li>
</ul>
<h2 id="greedy-mode" class="tsd-anchor-link">Greedy Mode<a href="#greedy-mode" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Commands can enter &quot;greedy mode&quot; using the <code>-#</code>, <code>-</code>, or <code>---</code> flags, which allows them to consume all remaining arguments blindly, even if they look like commands or options.</p>
<p><strong>Example:</strong></p>
<pre><code class="bash"><span class="hl-6"># Without greedy mode - &quot;command&quot; is parsed as a new command</span><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">prog</span><span class="hl-1"> </span><span class="hl-2">compile</span><span class="hl-1"> </span><span class="hl-2">file1.js</span><span class="hl-1"> </span><span class="hl-2">file2.js</span><span class="hl-1"> </span><span class="hl-2">command</span><span class="hl-1"> </span><span class="hl-2">other</span><span class="hl-1"> </span><span class="hl-2">arguments</span><br/><br/><span class="hl-6"># With greedy mode - everything after -# is an argument to &quot;compile&quot;</span><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">prog</span><span class="hl-1"> </span><span class="hl-2">compile</span><span class="hl-1"> </span><span class="hl-2">file1.js</span><span class="hl-1"> </span><span class="hl-2">file2.js</span><span class="hl-1"> </span><span class="hl-2">-#</span><span class="hl-1"> </span><span class="hl-2">command</span><span class="hl-1"> </span><span class="hl-2">other</span><span class="hl-1"> </span><span class="hl-2">arguments</span>
</code><button type="button">Copy</button></pre>

<p>Greedy mode continues until a terminator token (<code>-.</code> or <code>--.</code>) is encountered:</p>
<pre><code class="bash"><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">prog</span><span class="hl-1"> </span><span class="hl-2">compile</span><span class="hl-1"> </span><span class="hl-2">file1.js</span><span class="hl-1"> </span><span class="hl-2">-#</span><span class="hl-1"> </span><span class="hl-2">some-command-name</span><span class="hl-1"> </span><span class="hl-2">more-args</span><span class="hl-1"> </span><span class="hl-5">-.</span><span class="hl-1"> </span><span class="hl-2">actual-command</span><br/><span class="hl-6">#                        ↑                            ↑   ↑</span><br/><span class="hl-6">#                  Start greedy            Stop greedy   New command</span>
</code><button type="button">Copy</button></pre>

<p><strong>Use cases:</strong></p>
<ul>
<li>Passing arbitrary strings that might look like commands/options</li>
<li>Building proxy CLIs that forward args to other programs</li>
<li>Accepting user-provided command names as data</li>
</ul>
<h2 id="terminating-and-resuming" class="tsd-anchor-link">Terminating and Resuming<a href="#terminating-and-resuming" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><code>--</code> terminates parsing, with remaining args returned in <code>parsed._</code>.</li>
<li>Parsing can be resumed after it's terminated.</li>
<li><code>-.</code> or <code>--.</code> can terminate variadic params for commands and options.</li>
</ul>
<h2 id="installation" class="tsd-anchor-link">Installation<a href="#installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">nix-clap</span>
</code><button type="button">Copy</button></pre>

<p><strong>Requirements:</strong></p>
<ul>
<li>Node.js &gt;= 20</li>
<li>ESM or CommonJS (both supported)</li>
</ul>
<h1 id="interface" class="tsd-anchor-link">Interface<a href="#interface" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>This module exposes a class with a few methods.</p>
<p>See <a href="#apis">APIs</a> for more details.</p>
<h2 id="options-spec" class="tsd-anchor-link"><code>options spec</code><a href="#options-spec" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="js"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">options</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;some-option&quot;</span><span class="hl-4">:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">alias:</span><span class="hl-1"> [</span><span class="hl-2">&quot;s&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;so&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;description&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;[number cans] [beverage] [boolean diet] [string..]&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">argDefault:</span><span class="hl-1"> [</span><span class="hl-2">&quot;6&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;coke&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;true&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;foo&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-6">// customTypes defines custom type validators/coercers</span><br/><span class="hl-1">    </span><span class="hl-4">customTypes:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">beverage:</span><span class="hl-11"> /</span><span class="hl-12">^</span><span class="hl-13">(</span><span class="hl-11">coke</span><span class="hl-12">|</span><span class="hl-11">pepsi</span><span class="hl-13">)</span><span class="hl-12">$</span><span class="hl-11">/</span><span class="hl-1"> </span><span class="hl-6">// beverage must match this RegExp</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-4">allowCmd:</span><span class="hl-1"> [</span><span class="hl-2">&quot;cmd1&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;cmd2&quot;</span><span class="hl-1">]</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;another-option&quot;</span><span class="hl-4">:</span><span class="hl-1"> {}</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<p>Where:</p>
<table>
<thead>
<tr>
<th>field</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>alias</code></td>
<td>Specify aliases for the option, as a single string or an array of strings.</td>
</tr>
<tr>
<td><code>args</code></td>
<td>Arguments for the option. <code>&lt;type name&gt;</code> means it's required and <code>[type name]</code> optional.</td>
</tr>
<tr>
<td><code>desc</code></td>
<td>Description for the option - a string or a function that returns string.</td>
</tr>
<tr>
<td><code>argDefault</code></td>
<td>Default values to use <em>when all args are optional</em>.</td>
</tr>
<tr>
<td><code>required</code></td>
<td><code>true</code>/<code>false</code> whether this option must be specified.</td>
</tr>
<tr>
<td><code>allowCmd</code></td>
<td>list of command names this option is allow to follow only.</td>
</tr>
<tr>
<td><code>customTypes</code></td>
<td>Specify <a href="#value-coercion">value coercion</a> for custom types. Keys are type names, values are converters.</td>
</tr>
<tr>
<td><code>counting</code></td>
<td>Maximum count value for counting options. Use <code>Infinity</code> for unlimited counting.</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>Note:</strong> Options with kebab-case names (like <code>some-option</code>) are automatically accessible in camelCase (<code>someOption</code>) in the parsed results.</p>
</blockquote>
<h2 id="commands-spec" class="tsd-anchor-link"><code>commands spec</code><a href="#commands-spec" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Command spec share some properties that are the same as <a href="#options-spec">option spec</a>.</p>
<p>Command doesn't support the following:</p>
<ul>
<li>no <code>allowCmd</code> property.</li>
<li>args can't have <code>count</code> type.</li>
</ul>
<p>Command supports a few more properties: <code>usage</code>, <code>exec</code>, and <code>options</code>.</p>
<pre><code class="js"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">commands</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-6">// Regular sub-commands</span><br/><span class="hl-1">  </span><span class="hl-4">cmd1:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">alias:</span><span class="hl-1"> [</span><span class="hl-2">&quot;c&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;description&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;[number cans] [enum] [boolean diet] [string..]&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">argDefault:</span><span class="hl-1"> [</span><span class="hl-2">&quot;6&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;coke&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;true&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;foo&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-4">customTypes:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">enum:</span><span class="hl-11"> /</span><span class="hl-12">^</span><span class="hl-13">(</span><span class="hl-11">coke</span><span class="hl-12">|</span><span class="hl-11">pepsi</span><span class="hl-13">)</span><span class="hl-12">$</span><span class="hl-11">/</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-4">usage:</span><span class="hl-1"> </span><span class="hl-2">&quot;$0 $1&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">cmd</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-6">// cmd is the CommandNode instance</span><br/><span class="hl-1">      </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">meta</span><span class="hl-1"> = </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-4">jsonMeta</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">meta</span><span class="hl-1">.</span><span class="hl-4">args</span><span class="hl-1">, </span><span class="hl-4">meta</span><span class="hl-1">.</span><span class="hl-4">opts</span><span class="hl-1">);</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-4">options:</span><span class="hl-1"> {},</span><br/><span class="hl-1">    </span><span class="hl-4">subCommands:</span><span class="hl-1"> {}</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-4">cmd2:</span><span class="hl-1"> {}</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<p>Where:</p>
<table>
<thead>
<tr>
<th>field</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>alias</code></td>
<td>Specify aliases for the command, as a single string or an array of strings.</td>
</tr>
<tr>
<td><code>args</code></td>
<td>Specify arguments for the command. <code>&lt;&gt;</code> means it's required and <code>[]</code> optional. See <a href="#rules-for-command-args">rules</a> for more info.</td>
</tr>
<tr>
<td><code>usage</code></td>
<td>Usage message when help for the command is invoked - a string or a function that returns a string.</td>
</tr>
<tr>
<td></td>
<td><code>$0</code> will be replaced with program name and <code>$1</code> with command name.</td>
</tr>
<tr>
<td><code>desc</code></td>
<td>Description for the command - can be a string or a function that returns a string.</td>
</tr>
<tr>
<td><code>exec</code></td>
<td>The callback handler for the command. Receives <code>CommandNode</code> as first arg. Can be async.</td>
</tr>
<tr>
<td><code>options</code></td>
<td>Options private to this command only. Follows the same spec as <a href="#options-spec">top level options</a></td>
</tr>
<tr>
<td><code>subCommands</code></td>
<td>Nested sub-commands under this command. Follows the same spec as commands.</td>
</tr>
<tr>
<td><code>allowUnknownOption</code></td>
<td>If <code>true</code>, allows unknown options for this command.</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>Note:</strong> Set a default command via the <code>defaultCommand</code> config option in the NixClap constructor, not in the command spec.</p>
</blockquote>
<h3 id="rules-for-command-args" class="tsd-anchor-link">Rules for Command <code>args</code><a href="#rules-for-command-args" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>args</code> string uses a specific format to define command and option arguments:</p>
<p><strong>Basic Format:</strong></p>
<ul>
<li><code>&lt;arg&gt;</code> - Required argument</li>
<li><code>[arg]</code> - Optional argument</li>
<li>All required args must come before optional args</li>
<li>Multiple arguments separated by spaces: <code>&quot;&lt;first&gt; &lt;second&gt; [third]&quot;</code></li>
</ul>
<p><strong>Naming and Types:</strong></p>
<ul>
<li>Named with type: <code>&lt;name type&gt;</code> or <code>[name type]</code></li>
<li>Named without type (defaults to string): <code>&lt;name&gt;</code> or <code>[name]</code></li>
<li>Unnamed with type: <code>&lt;type&gt;</code> or <code>[type]</code></li>
<li>Unnamed without type: <code>&lt;&gt;</code> or <code>[]</code></li>
<li>Supported types: <code>string</code>, <code>number</code>, <code>float</code>, <code>boolean</code>, <code>count</code> (options only), or custom types via <a href="#value-coercion">coercion</a></li>
</ul>
<p><strong>Built-in Type Behaviors:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Coercion Behavior</th>
<th>Example Input</th>
<th>Parsed Value</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>string</code></td>
<td>No coercion</td>
<td><code>&quot;hello&quot;</code></td>
<td><code>&quot;hello&quot;</code></td>
<td>Default type if not specified</td>
</tr>
<tr>
<td><code>number</code></td>
<td><code>parseInt(val, 10)</code></td>
<td><code>&quot;42&quot;</code></td>
<td><code>42</code></td>
<td>Parses as integer</td>
</tr>
<tr>
<td><code>float</code></td>
<td><code>parseFloat(val)</code></td>
<td><code>&quot;3.14&quot;</code></td>
<td><code>3.14</code></td>
<td>Parses as floating point</td>
</tr>
<tr>
<td><code>boolean</code></td>
<td>Checks for truthy values</td>
<td><code>&quot;true&quot;</code>, <code>&quot;1&quot;</code>, <code>&quot;yes&quot;</code></td>
<td><code>true</code></td>
<td><code>&quot;false&quot;</code>, <code>&quot;0&quot;</code>, <code>&quot;no&quot;</code> → <code>false</code></td>
</tr>
<tr>
<td><code>count</code></td>
<td>Increments on each use</td>
<td><code>-vvv</code></td>
<td><code>3</code></td>
<td>Only for options, counts occurrences</td>
</tr>
</tbody>
</table>
<p><strong>Type Coercion Failures:</strong></p>
<p>When a value cannot be coerced to the specified type:</p>
<ul>
<li>String values that fail number/float parsing return <code>NaN</code></li>
<li>Values that fail custom type validation trigger <code>regex-unmatch</code> event</li>
<li>If <code>argDefault</code> is specified, the default value is used</li>
<li>Otherwise, the original string value is returned</li>
</ul>
<p><strong>Examples:</strong></p>
<pre><code class="js"><span class="hl-10">args</span><span class="hl-1">: </span><span class="hl-2">&quot;&lt;filename string&gt;&quot;</span><span class="hl-1">; </span><span class="hl-6">// Required named string arg</span><br/><span class="hl-10">args</span><span class="hl-1">: </span><span class="hl-2">&quot;&lt;count number&gt;&quot;</span><span class="hl-1">; </span><span class="hl-6">// Required named number arg (parsed as integer)</span><br/><span class="hl-10">args</span><span class="hl-1">: </span><span class="hl-2">&quot;&lt;price float&gt;&quot;</span><span class="hl-1">; </span><span class="hl-6">// Required named float arg (parsed as decimal)</span><br/><span class="hl-10">args</span><span class="hl-1">: </span><span class="hl-2">&quot;[enabled boolean]&quot;</span><span class="hl-1">; </span><span class="hl-6">// Optional named boolean arg</span><br/><span class="hl-10">args</span><span class="hl-1">: </span><span class="hl-2">&quot;[output]&quot;</span><span class="hl-1">; </span><span class="hl-6">// Optional named string arg (default type)</span><br/><span class="hl-10">args</span><span class="hl-1">: </span><span class="hl-2">&quot;&lt;input&gt; [output]&quot;</span><span class="hl-1">; </span><span class="hl-6">// Required + optional args</span><br/><span class="hl-10">args</span><span class="hl-1">: </span><span class="hl-2">&quot;&lt;value boolean&gt; &lt;name&gt;&quot;</span><span class="hl-1">; </span><span class="hl-6">// Multiple typed args</span>
</code><button type="button">Copy</button></pre>

<p><strong>Array Arguments:</strong></p>
<p>Use <code>..</code> suffix to specify array arguments (must be the last argument):</p>
<ul>
<li>
<p><strong>Unlimited variadic</strong>: <code>&lt;args..&gt;</code> or <code>[args..]</code></p>
<ul>
<li>Consumes 0 or more arguments</li>
<li>Example: <code>&quot;&lt;files..&gt;&quot;</code> accepts any number of files</li>
</ul>
</li>
<li>
<p><strong>Fixed size</strong>: <code>&lt;args..N&gt;</code></p>
<ul>
<li>Exactly N arguments required</li>
<li>Example: <code>&quot;&lt;coords..3&gt;&quot;</code> requires exactly 3 coordinates</li>
</ul>
</li>
<li>
<p><strong>Range with minimum</strong>: <code>&lt;args..N,&gt;</code> or <code>&lt;args..N,Inf&gt;</code></p>
<ul>
<li>At least N arguments required, unlimited maximum</li>
<li>Example: <code>&quot;&lt;files..1,&gt;&quot;</code> requires 1+ files</li>
<li>Example: <code>&quot;&lt;names..2,Inf&gt;&quot;</code> requires 2+ names</li>
</ul>
</li>
<li>
<p><strong>Range with min and max</strong>: <code>&lt;args..N,M&gt;</code></p>
<ul>
<li>Between N and M arguments (inclusive)</li>
<li>Example: <code>&quot;&lt;items..1,3&gt;&quot;</code> accepts 1-3 items</li>
<li>Example: <code>&quot;&lt;values..2,5&gt;&quot;</code> accepts 2-5 values</li>
</ul>
</li>
</ul>
<p><strong>Array Examples:</strong></p>
<pre><code class="js"><span class="hl-10">args</span><span class="hl-1">: </span><span class="hl-2">&quot;&lt;files string..&gt;&quot;</span><span class="hl-1">; </span><span class="hl-6">// 0+ files (variadic)</span><br/><span class="hl-10">args</span><span class="hl-1">: </span><span class="hl-2">&quot;&lt;coords number..3&gt;&quot;</span><span class="hl-1">; </span><span class="hl-6">// Exactly 3 numbers</span><br/><span class="hl-10">args</span><span class="hl-1">: </span><span class="hl-2">&quot;&lt;names..1,&gt;&quot;</span><span class="hl-1">; </span><span class="hl-6">// 1+ arguments (at least one required)</span><br/><span class="hl-10">args</span><span class="hl-1">: </span><span class="hl-2">&quot;&lt;items string..1,5&gt;&quot;</span><span class="hl-1">; </span><span class="hl-6">// 1-5 string items</span><br/><span class="hl-10">args</span><span class="hl-1">: </span><span class="hl-2">&quot;[files..]&quot;</span><span class="hl-1">; </span><span class="hl-6">// 0+ optional files</span><br/><span class="hl-10">args</span><span class="hl-1">: </span><span class="hl-2">&quot;&lt;input&gt; [extras..2,]&quot;</span><span class="hl-1">; </span><span class="hl-6">// Required input + 2+ optional extras</span>
</code><button type="button">Copy</button></pre>

<p><strong>Special Cases:</strong></p>
<ul>
<li>Unnamed arrays: <code>&lt;..&gt;</code>, <code>&lt;..3&gt;</code>, <code>&lt;..1,&gt;</code>, <code>&lt;..1,5&gt;</code></li>
<li>Typed unnamed: <code>&lt;string..&gt;</code>, <code>&lt;number..3&gt;</code>, <code>&lt;boolean..1,3&gt;</code></li>
</ul>
<p><strong>Rules:</strong></p>
<ul>
<li>Only the last argument can be an array/variadic argument</li>
<li>All required arguments must appear before optional arguments</li>
<li>Array arguments are accessible as JavaScript arrays in <code>jsonMeta.args</code></li>
</ul>
<h2 id="value-coercion" class="tsd-anchor-link">Value Coercion<a href="#value-coercion" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>If none of the predefined types work for you, you can specify your own as a function or a RegExp, or any value.</p>
<p>You use any valid identifier for the value type, and then you define a field with the same name in your spec that can be:</p>
<ul>
<li><code>function</code> - will be called with the value to convert</li>
<li><code>RegExp</code> - will be used to match the value. <code>undefined</code> is returned if it didn't match.</li>
<li>Anything else - will be used as the converted value.</li>
</ul>
<p>For example:</p>
<pre><code class="js"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">options</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-4">customFn:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;&lt;val fnval&gt;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">customTypes:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">fnval</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">value</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-4">value</span><span class="hl-1">.</span><span class="hl-0">substring</span><span class="hl-1">(</span><span class="hl-9">0</span><span class="hl-1">, </span><span class="hl-9">1</span><span class="hl-1">)</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-4">customRegex:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;&lt;val rx&gt;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">customTypes:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">rx:</span><span class="hl-11"> /</span><span class="hl-12">^</span><span class="hl-11">test</span><span class="hl-12">$</span><span class="hl-11">/</span><span class="hl-5">i</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-4">customValue:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;&lt;val foo&gt;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">customTypes:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">foo:</span><span class="hl-1"> </span><span class="hl-2">&quot;bar&quot;</span><span class="hl-1"> </span><span class="hl-6">// Always returns &quot;bar&quot;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">commands</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-4">foo:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;&lt;value1 type1&gt; &lt;value2 type2&gt;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">customTypes:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">type1</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">value</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-2">`test-</span><span class="hl-5">${</span><span class="hl-4">value</span><span class="hl-5">}</span><span class="hl-2">`</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">type2:</span><span class="hl-11"> /</span><span class="hl-12">^</span><span class="hl-11">test</span><span class="hl-12">$</span><span class="hl-11">/</span><span class="hl-5">i</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<blockquote>
<p>See <a href="media/value-coercion.ts">examples/value-coercion.ts</a> for a working example.</p>
</blockquote>
<h2 id="parse-result" class="tsd-anchor-link">Parse Result<a href="#parse-result" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Use the method <a href="#parseargv-start-parsed"><code>parse</code></a> to parse command line arguments. It will return a parse result object.</p>
<pre><code class="js"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-10">command</span><span class="hl-1">: {</span><br/><span class="hl-1">    </span><span class="hl-10">jsonMeta</span><span class="hl-1">: {</span><br/><span class="hl-1">      </span><span class="hl-10">name</span><span class="hl-1">: </span><span class="hl-2">&quot;~root-command~&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-10">alias</span><span class="hl-1">: </span><span class="hl-2">&quot;~root-command~&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-10">argList</span><span class="hl-1">: [],</span><br/><span class="hl-1">      </span><span class="hl-10">args</span><span class="hl-1">: {},</span><br/><span class="hl-1">      </span><span class="hl-10">opts</span><span class="hl-1">: {},</span><br/><span class="hl-1">      </span><span class="hl-10">optsFull</span><span class="hl-1">: {},</span><br/><span class="hl-1">      </span><span class="hl-10">optsCount</span><span class="hl-1">: {},</span><br/><span class="hl-1">      </span><span class="hl-10">source</span><span class="hl-1">: {},</span><br/><span class="hl-1">      </span><span class="hl-10">verbatim</span><span class="hl-1">: {},</span><br/><span class="hl-1">      </span><span class="hl-10">subCommands</span><span class="hl-1">: {}</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-10">execCmd</span><span class="hl-1">: </span><span class="hl-5">undefined</span><span class="hl-1">, </span><span class="hl-6">// Set after runExec/runExecAsync - the command that was executed</span><br/><span class="hl-1">  </span><span class="hl-10">index</span><span class="hl-1">: </span><span class="hl-9">5</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">error</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">_</span><span class="hl-1">: [],</span><br/><span class="hl-1">  </span><span class="hl-10">argv</span><span class="hl-1">: []</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Where:</p>
<ul>
<li><code>command</code> - The parsed command object with a <code>jsonMeta</code> property containing detailed information</li>
<li><code>execCmd</code> - The command that was executed (set after <code>runExec</code>/<code>runExecAsync</code>). This is the primary command that ran, useful for accessing the executed command directly without traversing the command tree.</li>
<li><code>index</code> - the index in <code>argv</code> parse stopped</li>
<li><code>error</code> - If parse failed and your <code>parse-fail</code> event handler throws, then this will contain the parse error. See <a href="#skip-default-event-behaviors">skip default event behaviors</a> for more details.</li>
<li><code>argv</code> - original array of argv</li>
<li><code>_</code> - remaining args in the <code>argv</code> array in case parsing was terminated by <code>--</code>.</li>
</ul>
<p>If any command with <a href="#command-exec-handler"><code>exec</code> handlers</a> were specified, then <code>parse</code> will invoke them before returning the parse result object.</p>
<h3 id="error-handling" class="tsd-anchor-link">Error Handling<a href="#error-handling" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>NixClap provides comprehensive error tracking during parsing. Errors are collected in <code>parsed.errorNodes</code>:</p>
<p><strong>Checking for Errors:</strong></p>
<pre><code class="js"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">parsed</span><span class="hl-1"> = </span><span class="hl-4">nc</span><span class="hl-1">.</span><span class="hl-0">parse</span><span class="hl-1">();</span><br/><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">errorNodes</span><span class="hl-1"> &amp;&amp; </span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">errorNodes</span><span class="hl-1">.</span><span class="hl-4">length</span><span class="hl-1"> &gt; </span><span class="hl-9">0</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">&quot;Parsing errors occurred:&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">errorNodes</span><span class="hl-1">.</span><span class="hl-0">forEach</span><span class="hl-1">(</span><span class="hl-4">node</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">`  - </span><span class="hl-5">${</span><span class="hl-4">node</span><span class="hl-8">.</span><span class="hl-4">error</span><span class="hl-8">.</span><span class="hl-4">message</span><span class="hl-5">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">  </span><span class="hl-4">process</span><span class="hl-1">.</span><span class="hl-0">exit</span><span class="hl-1">(</span><span class="hl-9">1</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Common Error Types:</strong></p>
<table>
<thead>
<tr>
<th>Error Type</th>
<th>When It Occurs</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>InvalidArgSpecifierError</code></td>
<td>Invalid args spec format</td>
<td><code>args: &quot;&lt;required&gt; [optional]&quot;</code> (required after optional)</td>
</tr>
<tr>
<td><code>UnknownOptionError</code></td>
<td>Unknown option encountered</td>
<td><code>--unknown</code> when <code>allowUnknownOption: false</code></td>
</tr>
<tr>
<td><code>UnknownCliArgError</code></td>
<td>Unknown argument provided</td>
<td>Extra args when strict mode enabled</td>
</tr>
<tr>
<td>Missing required argument</td>
<td>Required arg not provided</td>
<td><code>&lt;file&gt;</code> not provided</td>
</tr>
<tr>
<td>Type coercion failure</td>
<td>Value doesn't match custom type</td>
<td><code>--port abc</code> when expecting number</td>
</tr>
<tr>
<td>RegExp validation failure</td>
<td>Value doesn't match RegExp</td>
<td><code>--env prod</code> when only <code>/(dev|test)/</code> allowed</td>
</tr>
</tbody>
</table>
<p><strong>Error Handling Patterns:</strong></p>
<pre><code class="js"><span class="hl-6">// Pattern 1: Let default handlers work (shows help + exits)</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">nc</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">().</span><span class="hl-0">init</span><span class="hl-1">(</span><span class="hl-4">options</span><span class="hl-1">, </span><span class="hl-4">commands</span><span class="hl-1">);</span><br/><span class="hl-4">nc</span><span class="hl-1">.</span><span class="hl-0">parse</span><span class="hl-1">(); </span><span class="hl-6">// Errors trigger help automatically</span><br/><br/><span class="hl-6">// Pattern 2: Custom error handling (disable default handlers)</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">nc</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">({ </span><span class="hl-4">noDefaultHandlers:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1"> }).</span><span class="hl-0">init</span><span class="hl-1">(</span><span class="hl-4">options</span><span class="hl-1">, </span><span class="hl-4">commands</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">parsed</span><span class="hl-1"> = </span><span class="hl-4">nc</span><span class="hl-1">.</span><span class="hl-0">parse</span><span class="hl-1">();</span><br/><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">errorNodes</span><span class="hl-1">?.</span><span class="hl-4">length</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-6">// Handle errors your way</span><br/><span class="hl-1">  </span><span class="hl-0">logErrors</span><span class="hl-1">(</span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">errorNodes</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-0">showCustomHelp</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-4">process</span><span class="hl-1">.</span><span class="hl-0">exit</span><span class="hl-1">(</span><span class="hl-9">1</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">// Pattern 3: Selective error handling</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">nc</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">().</span><span class="hl-0">removeDefaultHandlers</span><span class="hl-1">(</span><span class="hl-2">&quot;parse-fail&quot;</span><span class="hl-1">).</span><span class="hl-0">init</span><span class="hl-1">(</span><span class="hl-4">options</span><span class="hl-1">, </span><span class="hl-4">commands</span><span class="hl-1">);</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">parsed</span><span class="hl-1"> = </span><span class="hl-4">nc</span><span class="hl-1">.</span><span class="hl-0">parse</span><span class="hl-1">();</span><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">errorNodes</span><span class="hl-1">?.</span><span class="hl-4">length</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-6">// Custom handling for parse errors only</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Accessing Error Details:</strong></p>
<pre><code class="js"><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">errorNodes</span><span class="hl-1">.</span><span class="hl-0">forEach</span><span class="hl-1">(</span><span class="hl-4">node</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Error message:&quot;</span><span class="hl-1">, </span><span class="hl-4">node</span><span class="hl-1">.</span><span class="hl-4">error</span><span class="hl-1">.</span><span class="hl-4">message</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Error type:&quot;</span><span class="hl-1">, </span><span class="hl-4">node</span><span class="hl-1">.</span><span class="hl-4">error</span><span class="hl-1">.</span><span class="hl-4">constructor</span><span class="hl-1">.</span><span class="hl-4">name</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Node type:&quot;</span><span class="hl-1">, </span><span class="hl-4">node</span><span class="hl-1">.</span><span class="hl-4">type</span><span class="hl-1">); </span><span class="hl-6">// &quot;option&quot;, &quot;command&quot;, etc.</span><br/><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">node</span><span class="hl-1">.</span><span class="hl-4">type</span><span class="hl-1"> === </span><span class="hl-2">&quot;option&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Option name:&quot;</span><span class="hl-1">, </span><span class="hl-4">node</span><span class="hl-1">.</span><span class="hl-4">name</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<h3 id="parse-result-command-object" class="tsd-anchor-link">Parse Result Command Object<a href="#parse-result-command-object" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The command.jsonMeta object contains the following information:</p>
<pre><code class="js"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-10">name</span><span class="hl-1">: </span><span class="hl-2">&quot;~root-command~&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">alias</span><span class="hl-1">: </span><span class="hl-2">&quot;~root-command~&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">argList</span><span class="hl-1">: [],</span><br/><span class="hl-1">  </span><span class="hl-10">args</span><span class="hl-1">: {},</span><br/><span class="hl-1">  </span><span class="hl-10">opts</span><span class="hl-1">: {}, </span><span class="hl-6">// contains the parsed values for each option (coerced to proper types)</span><br/><span class="hl-1">  </span><span class="hl-10">optsFull</span><span class="hl-1">: {}, </span><span class="hl-6">// contains the full string/array values for each option (before coercion)</span><br/><span class="hl-1">  </span><span class="hl-10">optsCount</span><span class="hl-1">: {}, </span><span class="hl-6">// contains the count for counting options</span><br/><span class="hl-1">  </span><span class="hl-10">source</span><span class="hl-1">: {}, </span><span class="hl-6">// contains info about where the option value came from</span><br/><span class="hl-1">  </span><span class="hl-10">verbatim</span><span class="hl-1">: {}, </span><span class="hl-6">// contains original unprocessed values as provided on command line</span><br/><span class="hl-1">  </span><span class="hl-10">subCommands</span><span class="hl-1">: {} </span><span class="hl-6">// contains parsed sub-commands</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>The <code>source</code> field can have the following values:</p>
<ul>
<li><code>cli</code> - option specified by user in the command line</li>
<li><code>cli-default</code> - User specified a value that didn't match RegExp and fallback to default.</li>
<li><code>cli-unmatch</code> - User specified a value that didn't match RegExp and there's no default to fallback to.</li>
<li><code>default</code> - default value in your <a href="#options-spec">options spec</a></li>
<li><code>user</code> - values you applied by calling the <a href="#applyconfigconfig-parsed-src"><code>applyConfig</code></a> method</li>
</ul>
<h3 id="command-exec-handler" class="tsd-anchor-link">Command <code>exec</code> handler<a href="#command-exec-handler" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>If the command has an <code>exec</code> handler, it receives the following arguments:</p>
<pre><code class="js"><span class="hl-0">exec</span><span class="hl-1">(</span><span class="hl-4">cmd</span><span class="hl-1">, </span><span class="hl-4">parsed</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<ul>
<li><code>cmd</code> - The <code>CommandNode</code> instance for this command</li>
<li><code>parsed</code> - The parsed result containing remaining args after <code>--</code> (optional)</li>
</ul>
<p>You can access command-specific arguments and options through the <code>jsonMeta</code> property:</p>
<pre><code class="js"><span class="hl-0">exec</span><span class="hl-1">(</span><span class="hl-4">cmd</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">meta</span><span class="hl-1"> = </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-4">jsonMeta</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Args:&quot;</span><span class="hl-1">, </span><span class="hl-4">meta</span><span class="hl-1">.</span><span class="hl-4">args</span><span class="hl-1">);         </span><span class="hl-6">// { filename: &quot;test.js&quot;, count: 5 }</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Options:&quot;</span><span class="hl-1">, </span><span class="hl-4">meta</span><span class="hl-1">.</span><span class="hl-4">opts</span><span class="hl-1">);      </span><span class="hl-6">// { verbose: true }</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Source:&quot;</span><span class="hl-1">, </span><span class="hl-4">meta</span><span class="hl-1">.</span><span class="hl-4">source</span><span class="hl-1">);     </span><span class="hl-6">// { verbose: &quot;cli&quot; }</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Sub-commands:&quot;</span><span class="hl-1">, </span><span class="hl-4">meta</span><span class="hl-1">.</span><span class="hl-4">subCommands</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-6">// Access command chain (sequence from root to this command)</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">cmdChain</span><span class="hl-1"> = </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-4">cmdChain</span><span class="hl-1">;  </span><span class="hl-6">// Array of CommandNodes from root to this command</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Accessing remaining args after <code>--</code>:</strong></p>
<pre><code class="js"><span class="hl-0">exec</span><span class="hl-1">(</span><span class="hl-4">cmd</span><span class="hl-1">, </span><span class="hl-4">parsed</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-6">// Regular command arguments</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Args:&quot;</span><span class="hl-1">, </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-4">jsonMeta</span><span class="hl-1">.</span><span class="hl-4">argList</span><span class="hl-1">);  </span><span class="hl-6">// [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-6">// Remaining args after --</span><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">parsed</span><span class="hl-1"> &amp;&amp; </span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">_</span><span class="hl-1">.</span><span class="hl-4">length</span><span class="hl-1"> &gt; </span><span class="hl-9">0</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Remaining:&quot;</span><span class="hl-1">, </span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">_</span><span class="hl-1">);  </span><span class="hl-6">// [&quot;d&quot;, &quot;e&quot;, &quot;f&quot;, &quot;--blah&quot;]</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Async handlers:</strong></p>
<pre><code class="js"><span class="hl-10">exec</span><span class="hl-1">: </span><span class="hl-5">async</span><span class="hl-1"> (</span><span class="hl-4">cmd</span><span class="hl-1">, </span><span class="hl-4">parsed</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">someAsyncTask</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-6">// Use parseAsync() to ensure this completes before parse returns</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<blockquote>
<p>You can turn off automatic exec invocation with the <code>skipExec</code> config flag passed to <a href="#constructorconfig"><code>NixClap</code> constructor</a></p>
</blockquote>
<h2 id="events" class="tsd-anchor-link">Events<a href="#events" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p><code>NixClap</code> extends <code>EventEmitter</code> and emits various events during the parsing and execution lifecycle.</p>
<h3 id="event-reference" class="tsd-anchor-link">Event Reference<a href="#event-reference" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Event</th>
<th>When Emitted</th>
<th>Parameters</th>
<th>Common Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>pre-help</code></td>
<td>Before help output is displayed</td>
<td><code>{ self: NixClap }</code></td>
<td>Modify help display, add headers</td>
</tr>
<tr>
<td><code>help</code></td>
<td>When <code>--help</code> is requested</td>
<td><code>ParseResult</code></td>
<td>Custom help formatting</td>
</tr>
<tr>
<td><code>post-help</code></td>
<td>After help output is displayed</td>
<td><code>{ self: NixClap }</code></td>
<td>Add footer, cleanup</td>
</tr>
<tr>
<td><code>parsed</code></td>
<td>After parsing, before exec handlers</td>
<td><code>{ nixClap: NixClap, parsed: ParseResult }</code></td>
<td>Validation, logging, transformations</td>
</tr>
<tr>
<td><code>parse-fail</code></td>
<td>When parsing encounters errors</td>
<td><code>ParseResult</code> (with <code>errorNodes</code>)</td>
<td>Custom error reporting</td>
</tr>
<tr>
<td><code>unknown-option</code></td>
<td>Unknown option encountered</td>
<td><code>string</code> (option name)</td>
<td>Dynamic option handling</td>
</tr>
<tr>
<td><code>unknown-command</code></td>
<td>Unknown command encountered</td>
<td><code>{ name: string, ... }</code></td>
<td>Dynamic command routing</td>
</tr>
<tr>
<td><code>no-action</code></td>
<td>No command with exec was invoked</td>
<td>none</td>
<td>Show help or default behavior</td>
</tr>
<tr>
<td><code>regex-unmatch</code></td>
<td>Value doesn't match RegExp validator</td>
<td><code>{ value: string, name: string, ... }</code></td>
<td>Custom validation messages</td>
</tr>
<tr>
<td><code>exit</code></td>
<td>Program should terminate</td>
<td><code>number</code> (exit code)</td>
<td>Cleanup, logging before exit</td>
</tr>
</tbody>
</table>
<h3 id="event-lifecycle" class="tsd-anchor-link">Event Lifecycle<a href="#event-lifecycle" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code><span class="hl-4">User</span><span class="hl-1"> </span><span class="hl-4">runs</span><span class="hl-1"> </span><span class="hl-7">CLI</span><br/><span class="hl-1">   ↓</span><br/><span class="hl-0">parse</span><span class="hl-1">() </span><span class="hl-4">called</span><br/><span class="hl-1">   ↓</span><br/><span class="hl-4">Argument</span><span class="hl-1"> </span><span class="hl-4">parsing</span><br/><span class="hl-1">   ↓</span><br/><span class="hl-0">emit</span><span class="hl-1">(</span><span class="hl-2">&#39;parsed&#39;</span><span class="hl-1">)  ← </span><span class="hl-4">After</span><span class="hl-1"> </span><span class="hl-4">parsing</span><span class="hl-1">, </span><span class="hl-4">before</span><span class="hl-1"> </span><span class="hl-4">execution</span><br/><span class="hl-1">   ↓</span><br/><span class="hl-4">Parse</span><span class="hl-1"> </span><span class="hl-4">errors</span><span class="hl-1">? ──</span><span class="hl-7">YES</span><span class="hl-1">→ </span><span class="hl-0">emit</span><span class="hl-1">(</span><span class="hl-2">&#39;parse-fail&#39;</span><span class="hl-1">) → </span><span class="hl-0">emit</span><span class="hl-1">(</span><span class="hl-2">&#39;exit&#39;</span><span class="hl-1">, </span><span class="hl-9">1</span><span class="hl-1">)</span><br/><span class="hl-1">   ↓ </span><span class="hl-7">NO</span><br/><span class="hl-4">Execute</span><span class="hl-1"> </span><span class="hl-4">commands</span><br/><span class="hl-1">   ↓</span><br/><span class="hl-1">--</span><span class="hl-4">help</span><span class="hl-1"> </span><span class="hl-4">flag</span><span class="hl-1">? ──</span><span class="hl-7">YES</span><span class="hl-1">→ </span><span class="hl-0">emit</span><span class="hl-1">(</span><span class="hl-2">&#39;pre-help&#39;</span><span class="hl-1">) → </span><span class="hl-0">emit</span><span class="hl-1">(</span><span class="hl-2">&#39;help&#39;</span><span class="hl-1">) → </span><span class="hl-0">emit</span><span class="hl-1">(</span><span class="hl-2">&#39;post-help&#39;</span><span class="hl-1">) → </span><span class="hl-0">emit</span><span class="hl-1">(</span><span class="hl-2">&#39;exit&#39;</span><span class="hl-1">, </span><span class="hl-9">0</span><span class="hl-1">)</span><br/><span class="hl-1">   ↓ </span><span class="hl-7">NO</span><br/><span class="hl-4">No</span><span class="hl-1"> </span><span class="hl-4">exec</span><span class="hl-1"> </span><span class="hl-4">invoked</span><span class="hl-1">? ──</span><span class="hl-7">YES</span><span class="hl-1">→ </span><span class="hl-0">emit</span><span class="hl-1">(</span><span class="hl-2">&#39;no-action&#39;</span><span class="hl-1">) → </span><span class="hl-0">emit</span><span class="hl-1">(</span><span class="hl-2">&#39;exit&#39;</span><span class="hl-1">, </span><span class="hl-9">1</span><span class="hl-1">)</span><br/><span class="hl-1">   ↓ </span><span class="hl-7">NO</span><br/><span class="hl-4">Return</span><span class="hl-1"> </span><span class="hl-4">parse</span><span class="hl-1"> </span><span class="hl-4">result</span>
</code><button>Copy</button></pre>

<h3 id="using-events" class="tsd-anchor-link">Using Events<a href="#using-events" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><strong>Basic Event Listening:</strong></p>
<pre><code class="js"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">nc</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">().</span><span class="hl-0">init</span><span class="hl-1">(</span><span class="hl-4">options</span><span class="hl-1">, </span><span class="hl-4">commands</span><span class="hl-1">);</span><br/><br/><span class="hl-4">nc</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-2">&quot;parsed&quot;</span><span class="hl-1">, ({ </span><span class="hl-4">parsed</span><span class="hl-1"> }) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Parsed successfully:&quot;</span><span class="hl-1">, </span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">command</span><span class="hl-1">.</span><span class="hl-4">name</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">nc</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-2">&quot;parse-fail&quot;</span><span class="hl-1">, </span><span class="hl-4">parsed</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">&quot;Parse failed with&quot;</span><span class="hl-1">, </span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">errorNodes</span><span class="hl-1">.</span><span class="hl-4">length</span><span class="hl-1">, </span><span class="hl-2">&quot;errors&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">nc</span><span class="hl-1">.</span><span class="hl-0">parse</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<p><strong>Custom Help Handling:</strong></p>
<pre><code class="js"><span class="hl-4">nc</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-2">&quot;pre-help&quot;</span><span class="hl-1">, ({ </span><span class="hl-4">self</span><span class="hl-1"> }) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;╔═══════════════════╗&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;║   My Awesome CLI   ║&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;╚═══════════════════╝</span><span class="hl-14">\n</span><span class="hl-2">&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">nc</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-2">&quot;post-help&quot;</span><span class="hl-1">, () </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;</span><span class="hl-14">\n</span><span class="hl-2">For more info: https://example.com/docs&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p><strong>Dynamic Command Handling:</strong></p>
<pre><code class="js"><span class="hl-4">nc</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-2">&quot;unknown-command&quot;</span><span class="hl-1">, </span><span class="hl-4">ctx</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Did you mean: </span><span class="hl-5">${</span><span class="hl-0">suggestCommand</span><span class="hl-8">(</span><span class="hl-4">ctx</span><span class="hl-8">.</span><span class="hl-4">name</span><span class="hl-8">)</span><span class="hl-5">}</span><span class="hl-2">?`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">process</span><span class="hl-1">.</span><span class="hl-0">exit</span><span class="hl-1">(</span><span class="hl-9">1</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<h3 id="default-event-handlers" class="tsd-anchor-link">Default Event Handlers<a href="#default-event-handlers" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>NixClap has default handlers for these events:</p>
<ul>
<li><code>help</code> - Output help and emit <code>exit</code></li>
<li><code>version</code> - If <code>version</code> has been set, then output version and emit <code>exit</code>.</li>
<li><code>parse-fail</code> - Output help and error message, and emit <code>exit</code>.</li>
<li><code>unknown-option</code> - Throws Error <code>Unknown option ${name}</code></li>
<li><code>unknown-command</code> - Throws Error <code>Unkown command ${ctx.name}</code></li>
<li><code>no-action</code> - Output help with error <code>No command given</code> and emit <code>exit</code></li>
</ul>
<ul>
<li><code>regex-unmatch</code> - Output a message to let user know that value didn't match and default will be used.</li>
</ul>
<ul>
<li><code>exit</code> - calls <code>process.exit(code)</code></li>
</ul>
<h4 id="skip-default-event-behaviors" class="tsd-anchor-link">Skip Default Event Behaviors<a href="#skip-default-event-behaviors" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>You can remove the default event handlers with one of these approaches:</p>
<ul>
<li>With the <a href="#removedefaulthandlers"><code>removeDefaultHandlers</code></a> method.</li>
<li>By passing in <code>handlers</code> object in the <code>config</code> for the constructor.</li>
</ul>
<p>For example, using <code>removeDefaultHandlers</code>:</p>
<pre><code class="js"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">nc</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">().</span><span class="hl-0">init</span><span class="hl-1">(</span><span class="hl-4">options</span><span class="hl-1">, </span><span class="hl-4">commands</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">parsed</span><span class="hl-1"> = </span><span class="hl-4">nc</span><span class="hl-1">.</span><span class="hl-0">removeDefaultHandlers</span><span class="hl-1">(</span><span class="hl-2">&quot;parse-fail&quot;</span><span class="hl-1">).</span><span class="hl-0">parse</span><span class="hl-1">();</span><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">error</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-6">// handle the parse error here</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Using constructor config.</p>
<pre><code class="js"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">parsed</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">({ </span><span class="hl-4">handlers:</span><span class="hl-1"> { </span><span class="hl-2">&quot;parse-fail&quot;</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1"> } }).</span><span class="hl-0">parse</span><span class="hl-1">();</span><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">error</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-6">// handle the parse error here</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h2 id="apis" class="tsd-anchor-link">APIs<a href="#apis" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>These are methods <code>NixClap</code> class supports.</p>
<ul>
<li><a href="#quick-start">Quick Start</a></li>
<li><a href="#parsing-capabilities">Parsing Capabilities</a>
<ul>
<li><a href="#options">Options</a></li>
<li><a href="#commands">Commands</a>
<ul>
<li><a href="#multiple-commands">Multiple Commands</a></li>
<li><a href="#sub-commands">Sub Commands</a></li>
</ul>
</li>
<li><a href="#greedy-mode">Greedy Mode</a></li>
<li><a href="#terminating-and-resuming">Terminating and Resuming</a></li>
</ul>
</li>
<li><a href="#installation">Installation</a></li>
<li><a href="#interface">Interface</a>
<ul>
<li><a href="#options-spec"><code>options spec</code></a></li>
<li><a href="#commands-spec"><code>commands spec</code></a>
<ul>
<li><a href="#rules-for-command-args">Rules for Command <code>args</code></a></li>
</ul>
</li>
<li><a href="#value-coercion">Value Coercion</a></li>
<li><a href="#parse-result">Parse Result</a>
<ul>
<li><a href="#parse-result-command-object">Parse Result Command Object</a></li>
<li><a href="#command-exec-handler">Command <code>exec</code> handler</a></li>
</ul>
</li>
<li><a href="#events">Events</a>
<ul>
<li><a href="#default-event-handlers">Default Event Handlers</a>
<ul>
<li><a href="#skip-default-event-behaviors">Skip Default Event Behaviors</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#api-methods">API Methods</a>
<ul>
<li><a href="#constructorconfig"><code>constructor(config)</code></a></li>
<li><a href="#versionv"><code>version(v)</code></a></li>
<li><a href="#helpsetting"><code>help(setting)</code></a></li>
<li><a href="#usagemsg-cmdusagemsg"><code>usage(msg)</code>, <code>cmdUsage(msg)</code></a></li>
<li><a href="#initoptions-commands"><code>init(options, commands)</code></a></li>
<li><a href="#init2rootcommandspec"><code>init2(rootCommandSpec)</code></a></li>
<li><a href="#defaultcommandname"><code>defaultCommand(name)</code></a></li>
<li><a href="#parseargv-start-parsed"><code>parse(argv, start, parsed)</code></a></li>
<li><a href="#parseasyncargv-start-parsed"><code>parseAsync(argv, start, parsed)</code></a></li>
<li><a href="#showhelperr-cmdname"><code>showHelp(err, cmdName)</code></a></li>
<li><a href="#removedefaulthandlers"><code>removeDefaultHandlers()</code></a></li>
<li><a href="#applyconfigconfig-parsed-src"><code>applyConfig(config, parsed, src)</code></a></li>
<li><a href="#runexecparsed"><code>runExec(parsed)</code></a></li>
<li><a href="#runexecasyncparsed"><code>runExecAsync(parsed)</code></a></li>
</ul>
</li>
<li><a href="#typescript-support">TypeScript Support</a></li>
<li><a href="#best-practices">Best Practices</a></li>
<li><a href="#alternatives">Alternatives</a></li>
</ul>
<h3 id="constructorconfig" class="tsd-anchor-link"><code>constructor(config)</code><a href="#constructorconfig" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><code>config</code> is an object with:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td><code>string</code></td>
<td>Program name. Auto-detected from <code>process.argv</code> if not specified.</td>
</tr>
<tr>
<td><code>version</code></td>
<td><code>string | number</code></td>
<td>Program version. Can also set with <a href="#versionv"><code>version()</code></a> method.</td>
</tr>
<tr>
<td><code>help</code></td>
<td><code>object | false</code></td>
<td>Custom help option setting. Can also set with <a href="#helpsetting"><code>help()</code></a> method.</td>
</tr>
<tr>
<td><code>usage</code></td>
<td><code>string</code></td>
<td>Usage message. Can also set with <a href="#usagemsg-cmdusagemsg"><code>usage()</code></a> method.</td>
</tr>
<tr>
<td><code>cmdUsage</code></td>
<td><code>string</code></td>
<td>Generic usage message for commands. Can also set with <a href="#usagemsg-cmdusagemsg"><code>cmdUsage()</code></a> method.</td>
</tr>
<tr>
<td><code>defaultCommand</code></td>
<td><code>string</code></td>
<td>Name of the default command to invoke when no command is given.</td>
</tr>
<tr>
<td><code>unknownCommandFallback</code></td>
<td><code>string</code></td>
<td>When unknown command encountered at root, treat it as arguments to this command (e.g., <code>&quot;run&quot;</code>).</td>
</tr>
<tr>
<td><code>allowUnknownCommand</code></td>
<td><code>boolean</code></td>
<td>Allow unknown commands to be parsed without error.</td>
</tr>
<tr>
<td><code>allowUnknownOption</code></td>
<td><code>boolean</code></td>
<td>Allow unknown options to be parsed without error.</td>
</tr>
<tr>
<td><code>skipExec</code></td>
<td><code>boolean</code></td>
<td>If true, will not call command <code>exec</code> handlers after parse.</td>
</tr>
<tr>
<td><code>skipExecDefault</code></td>
<td><code>boolean</code></td>
<td>If true, default command will not be inserted during parsing (prevents execution).</td>
</tr>
<tr>
<td><code>output</code></td>
<td><code>function</code></td>
<td>Callback for printing to console. Defaults to <code>process.stdout.write</code>.</td>
</tr>
<tr>
<td><code>exit</code></td>
<td><code>function</code></td>
<td>Custom exit function. Defaults to emitting the <code>exit</code> event.</td>
</tr>
<tr>
<td><code>handlers</code></td>
<td><code>object</code></td>
<td>Custom event handlers (see below).</td>
</tr>
<tr>
<td><code>noDefaultHandlers</code></td>
<td><code>boolean</code></td>
<td>If true, skip installing all default handlers. You must handle errors yourself.</td>
</tr>
</tbody>
</table>
<p><strong>Handlers Example:</strong></p>
<p>The <code>handlers</code> object can specify a function for each <a href="#events">event</a> or set it to <code>false</code> to turn off the default handler.</p>
<pre><code class="js"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">nc</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">handlers:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">&quot;parse-fail&quot;</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">parsed</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">&quot;Parse failed:&quot;</span><span class="hl-1">, </span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">errorNodes</span><span class="hl-1">[</span><span class="hl-9">0</span><span class="hl-1">].</span><span class="hl-4">error</span><span class="hl-1">.</span><span class="hl-4">message</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">process</span><span class="hl-1">.</span><span class="hl-0">exit</span><span class="hl-1">(</span><span class="hl-9">1</span><span class="hl-1">);</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-2">&quot;unknown-option&quot;</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1"> </span><span class="hl-6">// Disable default handler</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<h3 id="versionv" class="tsd-anchor-link"><code>version(v)</code><a href="#versionv" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Set program version with a string. ie: <code>1.0.0</code></p>
<p>Return: The <code>NixClap</code> instance itself.</p>
<blockquote>
<p>Must be called before the <a href="#initoptions-commands"><code>init</code></a> or <a href="#init2rootcommandspec"><code>init2</code></a> method.</p>
</blockquote>
<h3 id="helpsetting" class="tsd-anchor-link"><code>help(setting)</code><a href="#helpsetting" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Set a custom option setting for invoking help. Default is:</p>
<p>Return: The <code>NixClap</code> instance itself.</p>
<pre><code class="js"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-10">alias</span><span class="hl-1">: </span><span class="hl-2">&quot;h&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">desc</span><span class="hl-1">: </span><span class="hl-2">&quot;Show help&quot;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Option name is always <code>help</code>. Call <code>help(false)</code> to turn off the default <code>--help</code> option.</p>
<blockquote>
<p>Must be called before the <a href="#initoptions-commands"><code>init</code></a> or <a href="#init2rootcommandspec"><code>init2</code></a> method.</p>
</blockquote>
<h3 id="usagemsg-cmdusagemsg" class="tsd-anchor-link"><code>usage(msg)</code>, <code>cmdUsage(msg)</code><a href="#usagemsg-cmdusagemsg" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Set usage message for the program or command, which can be override by individual command's own usage.</p>
<p><code>msg</code> format is any string. <code>$0</code> will be replaced with program name and <code>$1</code> with command name.</p>
<p>Return: The <code>NixClap</code> instance itself.</p>
<blockquote>
<p>Must be called before the <a href="#initoptions-commands"><code>init</code></a> or <a href="#init2rootcommandspec"><code>init2</code></a> method.</p>
</blockquote>
<h3 id="initoptions-commands---legacyconvenience-wrapper" class="tsd-anchor-link"><code>init(options, commands)</code> - Legacy/Convenience Wrapper<a href="#initoptions-commands---legacyconvenience-wrapper" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><strong>Note:</strong> <code>init()</code> is a convenience wrapper around <code>init2()</code>. <strong>Consider using <a href="#init2rootcommandspec"><code>init2()</code></a> directly</strong> for a more flexible and consistent API.</p>
<p>Initialize your options and commands using separate parameters.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>options</code> - Top-level options available globally (or to specific commands via <code>allowCmd</code>)</li>
<li><code>commands</code> - Sub-commands under the root command</li>
</ul>
<p>Return: The <code>NixClap</code> instance itself.</p>
<p><strong>What this does internally:</strong></p>
<pre><code class="js"><span class="hl-6">// init(options, commands) is equivalent to:</span><br/><span class="hl-0">init2</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">options:</span><span class="hl-1"> </span><span class="hl-4">options</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">subCommands:</span><span class="hl-1"> </span><span class="hl-4">commands</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p><strong>Example:</strong></p>
<pre><code class="js"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">NixClap</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;nix-clap&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">// Using init()</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">nc</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">().</span><span class="hl-0">init</span><span class="hl-1">(</span><br/><span class="hl-1">  { </span><span class="hl-4">verbose:</span><span class="hl-1"> { </span><span class="hl-4">alias:</span><span class="hl-1"> </span><span class="hl-2">&quot;v&quot;</span><span class="hl-1"> } },</span><br/><span class="hl-1">  { </span><span class="hl-4">build:</span><span class="hl-1"> { </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Build project&quot;</span><span class="hl-1">, </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> () </span><span class="hl-5">=&gt;</span><span class="hl-1"> {} } }</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-6">// Equivalent using init2() (recommended)</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">nc</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">().</span><span class="hl-0">init2</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">options:</span><span class="hl-1"> { </span><span class="hl-4">verbose:</span><span class="hl-1"> { </span><span class="hl-4">alias:</span><span class="hl-1"> </span><span class="hl-2">&quot;v&quot;</span><span class="hl-1"> } },</span><br/><span class="hl-1">  </span><span class="hl-4">subCommands:</span><span class="hl-1"> { </span><span class="hl-4">build:</span><span class="hl-1"> { </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Build project&quot;</span><span class="hl-1">, </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> () </span><span class="hl-5">=&gt;</span><span class="hl-1"> {} } }</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p><strong>Limitations:</strong></p>
<ul>
<li>Cannot define root command arguments or exec handler directly</li>
<li>Less flexible than <code>init2()</code></li>
<li>Primarily exists for backwards compatibility</li>
</ul>
<blockquote>
<p><strong>Recommendation:</strong> Use <a href="#init2rootcommandspec"><code>init2()</code></a> for new code - it's more powerful and provides a cleaner API.</p>
</blockquote>
<h3 id="init2rootcommandspec---primary-api-recommended" class="tsd-anchor-link"><code>init2(rootCommandSpec)</code> - Primary API (Recommended)<a href="#init2rootcommandspec---primary-api-recommended" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Initialize your CLI by defining the root command directly. <strong>This is the recommended primary API for setting up NixClap.</strong></p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>rootCommandSpec</code> - A command spec object that defines the root command, including:
<ul>
<li><code>args</code> - Arguments for the root command (optional)</li>
<li><code>exec</code> - Execution handler for the root command (optional)</li>
<li><code>options</code> - Top-level options available to root and sub-commands (optional)</li>
<li><code>subCommands</code> - Sub-commands under the root command (optional)</li>
<li>All other fields from <a href="#commands-spec">command spec</a></li>
</ul>
</li>
</ul>
<p>Return: The <code>NixClap</code> instance itself.</p>
<p><strong>Basic Example:</strong></p>
<pre><code class="js"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">NixClap</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;nix-clap&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">// Root command with arguments</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">nc</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">({ </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-2">&quot;process&quot;</span><span class="hl-1"> }).</span><span class="hl-0">init2</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;&lt;files string..&gt;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">cmd</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">files</span><span class="hl-1"> = </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-4">jsonMeta</span><span class="hl-1">.</span><span class="hl-4">args</span><span class="hl-1">.</span><span class="hl-4">files</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Processing:&quot;</span><span class="hl-1">, </span><span class="hl-4">files</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p><strong>Complete Example with Options and Sub-commands:</strong></p>
<pre><code class="js"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">nc</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">({ </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-2">&quot;file-processor&quot;</span><span class="hl-1"> }).</span><span class="hl-0">init2</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-6">// Root command arguments</span><br/><span class="hl-1">  </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;[input string] [files string..]&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-6">// Root command exec</span><br/><span class="hl-1">  </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">cmd</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">meta</span><span class="hl-1"> = </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-4">jsonMeta</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Root command:&quot;</span><span class="hl-1">, </span><span class="hl-4">meta</span><span class="hl-1">.</span><span class="hl-4">args</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Options:&quot;</span><span class="hl-1">, </span><span class="hl-4">meta</span><span class="hl-1">.</span><span class="hl-4">opts</span><span class="hl-1">);</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-6">// Top-level options</span><br/><span class="hl-1">  </span><span class="hl-4">options:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">verbose:</span><span class="hl-1"> { </span><span class="hl-4">alias:</span><span class="hl-1"> </span><span class="hl-2">&quot;v&quot;</span><span class="hl-1">, </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Verbose output&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">    </span><span class="hl-4">output:</span><span class="hl-1"> { </span><span class="hl-4">alias:</span><span class="hl-1"> </span><span class="hl-2">&quot;o&quot;</span><span class="hl-1">, </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Output file&quot;</span><span class="hl-1">, </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;&lt;path string&gt;&quot;</span><span class="hl-1"> }</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-6">// Sub-commands</span><br/><span class="hl-1">  </span><span class="hl-4">subCommands:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">build:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Build the project&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">cmd</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Building...&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-4">convert:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Convert files&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;&lt;input string&gt; &lt;output string&gt;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">cmd</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Converting...&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p><strong>Advantages over init():</strong></p>
<ul>
<li>✅ Define root command behavior (args + exec) directly</li>
<li>✅ Single, declarative configuration object</li>
<li>✅ More flexible and powerful</li>
<li>✅ Cleaner, more consistent API</li>
</ul>
<p>See the <a href="#understanding-init-vs-init2">Understanding init() vs init2()</a> section for detailed comparison.</p>
<h3 id="defaultcommandname" class="tsd-anchor-link"><code>defaultCommand(name)</code><a href="#defaultcommandname" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Set the default command which is invoked when no non-option arguments are provided in the command line.</p>
<p><strong>How it works:</strong></p>
<ul>
<li>When preprocessing detects only option arguments (no non-option args), the default command is inserted upfront during parsing</li>
<li>All subsequent parsing happens under the default command, allowing options to be routed correctly</li>
<li>The default command is executed automatically if it has an <code>exec</code> handler</li>
</ul>
<p><strong>Requirements:</strong></p>
<ul>
<li>Only one command can be default</li>
<li>Default command cannot have required args</li>
<li>Default command must have the <code>exec</code> handler</li>
</ul>
<p><strong>Example with init2():</strong></p>
<pre><code class="js"><span class="hl-6">// Make &#39;build&#39; the default command</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">nc</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">({ </span><span class="hl-4">defaultCommand:</span><span class="hl-1"> </span><span class="hl-2">&quot;build&quot;</span><span class="hl-1"> }).</span><span class="hl-0">version</span><span class="hl-1">(</span><span class="hl-2">&quot;1.0.0&quot;</span><span class="hl-1">).</span><span class="hl-0">init2</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">subCommands:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">build:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Build the project&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">cmd</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Building...&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-4">test:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Run tests&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">cmd</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Testing...&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-6">// These are equivalent:</span><br/><span class="hl-6">// $ my-prog          # Runs &#39;build&#39; (default)</span><br/><span class="hl-6">// $ my-prog build    # Explicitly runs &#39;build&#39;</span>
</code><button type="button">Copy</button></pre>

<p><strong>How it interacts with root command:</strong></p>
<p>When using <code>init2()</code> with both a root command and a default command:</p>
<pre><code class="js"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">nc</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">({ </span><span class="hl-4">defaultCommand:</span><span class="hl-1"> </span><span class="hl-2">&quot;serve&quot;</span><span class="hl-1"> }).</span><span class="hl-0">init2</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;[files string..]&quot;</span><span class="hl-1">, </span><span class="hl-6">// Root command args</span><br/><span class="hl-1">  </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">cmd</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Root:&quot;</span><span class="hl-1">, </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-4">jsonMeta</span><span class="hl-1">.</span><span class="hl-4">args</span><span class="hl-1">.</span><span class="hl-4">files</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-4">subCommands:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">serve:</span><span class="hl-1"> { </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Start server&quot;</span><span class="hl-1">, </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> () </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Serving...&quot;</span><span class="hl-1">) },</span><br/><span class="hl-1">    </span><span class="hl-4">build:</span><span class="hl-1"> { </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Build project&quot;</span><span class="hl-1">, </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> () </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Building...&quot;</span><span class="hl-1">) }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p><strong>Execution priority:</strong></p>
<ol>
<li><strong>Sub-command match</strong> → Executes matched sub-command</li>
<li><strong>Non-option arguments provided</strong> → Executes root command</li>
<li><strong>Only options (no non-option args)</strong> → Default command inserted during parsing, then executed</li>
</ol>
<pre><code class="bash"><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">my-prog</span><span class="hl-1"> </span><span class="hl-2">build</span><span class="hl-1">           </span><span class="hl-6"># 1. Executes &#39;build&#39; sub-command</span><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">my-prog</span><span class="hl-1"> </span><span class="hl-2">file.txt</span><span class="hl-1">        </span><span class="hl-6"># 2. Executes root command with args</span><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">my-prog</span><span class="hl-1">                 </span><span class="hl-6"># 3. Executes &#39;serve&#39; (default command, inserted during parsing)</span><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">my-prog</span><span class="hl-1"> </span><span class="hl-5">--verbose</span><span class="hl-1">       </span><span class="hl-6"># 3. Executes &#39;serve&#39; with --verbose option (default command inserted during parsing)</span>
</code><button type="button">Copy</button></pre>

<p><strong>Note:</strong> The default command is inserted during preprocessing when only option arguments are detected. This ensures options are correctly routed to the default command, while root-level options (if any) remain at the root level.</p>
<p><strong>Note:</strong> When <code>unknownCommandFallback</code> is also configured, unknown commands take precedence over default command. See <a href="#unknowncommandfallback"><code>unknownCommandFallback</code></a> for details.</p>
<blockquote>
<p><strong>Tip:</strong> Use default command when you have a primary action for your CLI (e.g., <code>serve</code> for a server, <code>build</code> for a build tool)</p>
</blockquote>
<blockquote>
<p>See <a href="media/default-command.ts">examples/default-command.ts</a></p>
</blockquote>
<h3 id="unknowncommandfallback" class="tsd-anchor-link"><code>unknownCommandFallback</code><a href="#unknowncommandfallback" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>When an unknown command is encountered at the root level, treat it as arguments to a specified fallback command. For example, with <code>unknownCommandFallback: &quot;run&quot;</code>, <code>prog unknown</code> becomes <code>prog run unknown</code>.</p>
<p><strong>Requirements:</strong></p>
<ul>
<li>Only applies at root level</li>
<li>Does not apply if <code>allowUnknownCommand</code> is enabled</li>
<li>Fallback command must exist</li>
<li>Fallback command should accept arguments (variadic or fixed)</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code class="js"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">nc</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">defaultCommand:</span><span class="hl-1"> </span><span class="hl-2">&quot;install&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">unknownCommandFallback:</span><span class="hl-1"> </span><span class="hl-2">&quot;run&quot;</span><br/><span class="hl-1">}).</span><span class="hl-0">init2</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">subCommands:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">install:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Install packages&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">cmd</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Installing...&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-4">run:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Run a script&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;[script string..]&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">cmd</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">script</span><span class="hl-1"> = </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-4">jsonMeta</span><span class="hl-1">.</span><span class="hl-4">argList</span><span class="hl-1">[</span><span class="hl-9">0</span><span class="hl-1">];</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Running script: </span><span class="hl-5">${</span><span class="hl-4">script</span><span class="hl-5">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p><strong>Behavior:</strong></p>
<pre><code class="bash"><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">my-prog</span><span class="hl-1">                    </span><span class="hl-6"># Runs &#39;install&#39; (defaultCommand)</span><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">my-prog</span><span class="hl-1"> </span><span class="hl-5">--verbose</span><span class="hl-1">          </span><span class="hl-6"># Runs &#39;install&#39; with --verbose option (defaultCommand)</span><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">my-prog</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1">           </span><span class="hl-6"># Runs &#39;install&#39; explicitly</span><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">my-prog</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">build</span><span class="hl-1">         </span><span class="hl-6"># Runs &#39;run&#39; with &#39;build&#39; as argument</span><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">my-prog</span><span class="hl-1"> </span><span class="hl-2">build</span><span class="hl-1">             </span><span class="hl-6"># Unknown command → becomes &#39;run build&#39;</span><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">my-prog</span><span class="hl-1"> </span><span class="hl-2">test</span><span class="hl-1"> </span><span class="hl-2">x</span><span class="hl-1"> </span><span class="hl-2">y</span><span class="hl-1"> </span><span class="hl-2">z</span><span class="hl-1">        </span><span class="hl-6"># Unknown command → becomes &#39;run test x y z&#39;</span>
</code><button type="button">Copy</button></pre>

<p><strong>Interaction with <code>defaultCommand</code>:</strong></p>
<p>The <code>unknownCommandFallback</code> and <code>defaultCommand</code> work together seamlessly:</p>
<ol>
<li>
<p><strong>No arguments or only options</strong> → <code>defaultCommand</code> is inserted during parsing and executed</p>
<ul>
<li><code>prog</code> → runs default command (inserted during parsing)</li>
<li><code>prog --verbose</code> → runs default command with options (inserted during parsing)</li>
</ul>
</li>
<li>
<p><strong>First non-option argument is unknown</strong> → <code>unknownCommandFallback</code> is triggered</p>
<ul>
<li><code>prog unknown</code> → becomes <code>prog &lt;fallback&gt; unknown</code></li>
<li>The unknown command name becomes the first argument to the fallback command</li>
</ul>
</li>
<li>
<p><strong>First non-option argument is a known command</strong> → That command runs normally</p>
<ul>
<li><code>prog install</code> → runs <code>install</code> command</li>
<li><code>prog run script</code> → runs <code>run</code> command with <code>script</code> as argument</li>
</ul>
</li>
</ol>
<p><strong>Key points:</strong></p>
<ul>
<li>Known commands work normally (<code>install</code>, <code>run</code>, etc.)</li>
<li>Unknown commands are treated as arguments to the fallback command</li>
<li>The unknown command name becomes the first argument to the fallback command</li>
<li>Options alone (no non-option args) don't trigger fallback - they use <code>defaultCommand</code> instead</li>
</ul>
<h3 id="parseargv-start-parsed" class="tsd-anchor-link"><code>parse(argv, start, parsed)</code><a href="#parseargv-start-parsed" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Parse command line. Call without any params to parse <code>process.argv</code>.</p>
<p>Return: The parse result object.</p>
<ul>
<li><code>argv</code> - array of CLI args. Defaults to <code>process.argv</code>.</li>
<li><code>start</code> - index for argv from where to start parsing</li>
<li><code>parsed</code> - previous result from <code>parse</code>. If passed, then parsing will add new data to it.</li>
</ul>
<h3 id="parseasyncargv-start-parsed" class="tsd-anchor-link"><code>parseAsync(argv, start, parsed)</code><a href="#parseasyncargv-start-parsed" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>async version of <a href="#parseargv-start-parsed">parse</a>.</p>
<ul>
<li>It will use <a href="#runexecasyncparsed">runExecAsync</a> to invoke command <code>exec</code> handlers serially.</li>
<li>The command handler can return a Promise, which will be awaited.</li>
</ul>
<p>Return: A promise the resolve with the parse result object.</p>
<h3 id="showhelperr-cmdname" class="tsd-anchor-link"><code>showHelp(err, cmdName)</code><a href="#showhelperr-cmdname" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Show help message and then emit <code>exit</code>.</p>
<ul>
<li><code>err</code> - if valid, then <code>err.message</code> will be printed after help message and exit with code <code>1</code>.</li>
<li><code>cmdName</code> - if valid, then will print help for the specific command.</li>
</ul>
<h3 id="removedefaulthandlers" class="tsd-anchor-link"><code>removeDefaultHandlers()</code><a href="#removedefaulthandlers" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Remove NixClap's default handlers for the list of <a href="#events">event names</a>.</p>
<p>If you've replaced the handler through specifying <code>handlers</code> in <code>config</code> for the constructor, then this will not remove your handler.</p>
<p>Return: The <code>NixClap</code> instance itself.</p>
<ul>
<li>You can pass in <code>&quot;*&quot;</code> to remove all default handlers.</li>
<li>You can pass in the event names you want to remove.</li>
</ul>
<p>ie:</p>
<pre><code class="js"><span class="hl-4">nc</span><span class="hl-1">.</span><span class="hl-0">removeDefaultHandlers</span><span class="hl-1">(</span><span class="hl-2">&quot;parse-fail&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;unknown-option&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;unknown-command&quot;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h3 id="applyconfigconfig-src" class="tsd-anchor-link"><code>applyConfig(config, src)</code><a href="#applyconfigconfig-src" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Apply configuration from external sources (e.g., config files) to a parsed command.</p>
<p><strong>Note:</strong> This method is called <strong>on a CommandNode instance</strong>, not on the NixClap instance.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>config</code> - Object containing option values to apply</li>
<li><code>src</code> - Source name for tracking. Should be one of: <code>&quot;cli&quot;</code>, <code>&quot;cli-default&quot;</code>, <code>&quot;cli-unmatch&quot;</code>, <code>&quot;default&quot;</code>, or <code>&quot;user&quot;</code> (default: <code>&quot;user&quot;</code>)</li>
</ul>
<p>This method only overrides options whose <code>source</code> does <strong>not</strong> start with <code>&quot;cli&quot;</code>, ensuring command-line arguments always take precedence.</p>
<p><strong>Example:</strong> Load options from <code>package.json</code>:</p>
<pre><code class="js"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">readFileSync</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;fs&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">pkg</span><span class="hl-1"> = </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-0">parse</span><span class="hl-1">(</span><span class="hl-0">readFileSync</span><span class="hl-1">(</span><span class="hl-2">&quot;./package.json&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;utf-8&quot;</span><span class="hl-1">));</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">parsed</span><span class="hl-1"> = </span><span class="hl-4">nc</span><span class="hl-1">.</span><span class="hl-0">parse</span><span class="hl-1">();</span><br/><br/><span class="hl-6">// Apply config from package.json</span><br/><span class="hl-6">// Use &quot;user&quot; as the source type (standard practice for external configs)</span><br/><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">command</span><span class="hl-1">.</span><span class="hl-0">applyConfig</span><span class="hl-1">(</span><span class="hl-4">pkg</span><span class="hl-1">.</span><span class="hl-4">myCliConfig</span><span class="hl-1">, </span><span class="hl-2">&quot;user&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">command</span><span class="hl-1">.</span><span class="hl-4">jsonMeta</span><span class="hl-1">.</span><span class="hl-4">opts</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">command</span><span class="hl-1">.</span><span class="hl-4">jsonMeta</span><span class="hl-1">.</span><span class="hl-4">source</span><span class="hl-1">); </span><span class="hl-6">// Shows where each option came from</span>
</code><button type="button">Copy</button></pre>

<h3 id="runexecparsed" class="tsd-anchor-link"><code>runExec(parsed)</code><a href="#runexecparsed" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Go through the commands in parsed and call their <code>exec</code> handler.</p>
<blockquote>
<p>The <a href="#parseargv-start-parsed"><code>parse</code></a> method will call this at the end unless <code>skipExec</code> flag is set.</p>
</blockquote>
<p>Return: The number of commands with <code>exec</code> was invoked.</p>
<ul>
<li><code>parsed</code> - The parse result object.</li>
</ul>
<p><strong>Note:</strong> Default command execution is controlled by the <code>skipExecDefault</code> config option. If <code>skipExecDefault</code> is <code>true</code>, the default command will not be inserted during parsing, and therefore won't be executed.</p>
<h3 id="runexecasyncparsed" class="tsd-anchor-link"><code>runExecAsync(parsed)</code><a href="#runexecasyncparsed" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Async version of <a href="#runexecparsed">runExec</a></p>
<p>Return: A promise that resolves with the number of commands with <code>exec</code> invoked.</p>
<ul>
<li><code>parsed</code> - The parse result object.</li>
</ul>
<h2 id="typescript-support" class="tsd-anchor-link">TypeScript Support<a href="#typescript-support" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>NixClap is written in TypeScript and provides full type definitions out of the box.</p>
<h3 id="basic-typescript-usage" class="tsd-anchor-link">Basic TypeScript Usage<a href="#basic-typescript-usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">NixClap</span><span class="hl-1">, </span><span class="hl-4">CommandSpec</span><span class="hl-1">, </span><span class="hl-4">OptionSpec</span><span class="hl-1">, </span><span class="hl-4">ParseResult</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;nix-clap&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">options</span><span class="hl-1">: </span><span class="hl-15">Record</span><span class="hl-1">&lt;</span><span class="hl-15">string</span><span class="hl-1">, </span><span class="hl-15">OptionSpec</span><span class="hl-1">&gt; = {</span><br/><span class="hl-1">  </span><span class="hl-4">verbose:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">alias:</span><span class="hl-1"> </span><span class="hl-2">&quot;v&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Enable verbose output&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;&lt;boolean&gt;&quot;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">commands</span><span class="hl-1">: </span><span class="hl-15">Record</span><span class="hl-1">&lt;</span><span class="hl-15">string</span><span class="hl-1">, </span><span class="hl-15">CommandSpec</span><span class="hl-1">&gt; = {</span><br/><span class="hl-1">  </span><span class="hl-4">build:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Build the project&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">cmd</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-6">// cmd is typed as CommandNode</span><br/><span class="hl-1">      </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">meta</span><span class="hl-1"> = </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-4">jsonMeta</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">meta</span><span class="hl-1">.</span><span class="hl-4">opts</span><span class="hl-1">.</span><span class="hl-4">verbose</span><span class="hl-1">); </span><span class="hl-6">// Type-safe access</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">nc</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">().</span><span class="hl-0">init</span><span class="hl-1">(</span><span class="hl-4">options</span><span class="hl-1">, </span><span class="hl-4">commands</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">parsed</span><span class="hl-1">: </span><span class="hl-15">ParseResult</span><span class="hl-1"> = </span><span class="hl-4">nc</span><span class="hl-1">.</span><span class="hl-0">parse</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<h3 id="using-init2-with-typescript" class="tsd-anchor-link">Using init2() with TypeScript<a href="#using-init2-with-typescript" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">NixClap</span><span class="hl-1">, </span><span class="hl-4">CommandSpec</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;nix-clap&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">// Define root command spec with full type safety</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">rootSpec</span><span class="hl-1">: </span><span class="hl-15">CommandSpec</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;[input string] [files string..]&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Process input files&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">cmd</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> { </span><span class="hl-7">input</span><span class="hl-1">, </span><span class="hl-7">files</span><span class="hl-1"> } = </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-4">jsonMeta</span><span class="hl-1">.</span><span class="hl-4">args</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Processing:&quot;</span><span class="hl-1">, </span><span class="hl-4">input</span><span class="hl-1">, </span><span class="hl-4">files</span><span class="hl-1">);</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-4">options:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">verbose:</span><span class="hl-1"> { </span><span class="hl-4">alias:</span><span class="hl-1"> </span><span class="hl-2">&quot;v&quot;</span><span class="hl-1">, </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Verbose output&quot;</span><span class="hl-1"> }</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-4">subCommands:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">build:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Build the project&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> () </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Building...&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">nc</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">().</span><span class="hl-0">init2</span><span class="hl-1">(</span><span class="hl-4">rootSpec</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h3 id="type-safe-command-specs" class="tsd-anchor-link">Type-Safe Command Specs<a href="#type-safe-command-specs" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">NixClap</span><span class="hl-1">, </span><span class="hl-4">CommandSpec</span><span class="hl-1">, </span><span class="hl-4">OptionSpec</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;nix-clap&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">// Define options with full types</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">options</span><span class="hl-1">: </span><span class="hl-15">Record</span><span class="hl-1">&lt;</span><span class="hl-15">string</span><span class="hl-1">, </span><span class="hl-15">OptionSpec</span><span class="hl-1">&gt; = {</span><br/><span class="hl-1">  </span><span class="hl-4">output:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">alias:</span><span class="hl-1"> </span><span class="hl-2">&quot;o&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Output file path&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;&lt;path string&gt;&quot;</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-4">verbose:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">alias:</span><span class="hl-1"> </span><span class="hl-2">&quot;v&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Enable verbose output&quot;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-6">// Define commands with full types</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">commands</span><span class="hl-1">: </span><span class="hl-15">Record</span><span class="hl-1">&lt;</span><span class="hl-15">string</span><span class="hl-1">, </span><span class="hl-15">CommandSpec</span><span class="hl-1">&gt; = {</span><br/><span class="hl-1">  </span><span class="hl-4">process:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;&lt;files string..&gt;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Process files&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">cmd</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-5">const</span><span class="hl-1"> { </span><span class="hl-7">files</span><span class="hl-1"> } = </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-4">jsonMeta</span><span class="hl-1">.</span><span class="hl-4">args</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-5">const</span><span class="hl-1"> { </span><span class="hl-7">output</span><span class="hl-1">, </span><span class="hl-7">verbose</span><span class="hl-1"> } = </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-4">jsonMeta</span><span class="hl-1">.</span><span class="hl-4">opts</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Files:&quot;</span><span class="hl-1">, </span><span class="hl-4">files</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Output:&quot;</span><span class="hl-1">, </span><span class="hl-4">output</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Verbose:&quot;</span><span class="hl-1">, </span><span class="hl-4">verbose</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-6">// Use with init2() for root command</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">nc</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">().</span><span class="hl-0">init2</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;[input string]&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">cmd</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> { </span><span class="hl-7">input</span><span class="hl-1"> } = </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-4">jsonMeta</span><span class="hl-1">.</span><span class="hl-4">args</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Input:&quot;</span><span class="hl-1">, </span><span class="hl-4">input</span><span class="hl-1">);</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-4">options</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">subCommands:</span><span class="hl-1"> </span><span class="hl-4">commands</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p><strong>Type Safety Benefits:</strong></p>
<ul>
<li>✅ Full IntelliSense/autocomplete support</li>
<li>✅ Compile-time checking of command specs</li>
<li>✅ Type-safe access to parsed arguments and options</li>
<li>✅ Self-documenting API through types</li>
</ul>
<blockquote>
<p>See <a href="media/typescript-usage.ts">examples/typescript-usage.ts</a></p>
</blockquote>
<h2 id="best-practices" class="tsd-anchor-link">Best Practices<a href="#best-practices" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="1-prefer-init2-over-init" class="tsd-anchor-link">1. Prefer <code>init2()</code> over <code>init()</code><a href="#1-prefer-init2-over-init" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="js"><span class="hl-6">// ✅ Recommended - modern, flexible API</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">nc</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">().</span><span class="hl-0">version</span><span class="hl-1">(</span><span class="hl-2">&quot;1.0.0&quot;</span><span class="hl-1">).</span><span class="hl-0">init2</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">args:</span><span class="hl-1"> </span><span class="hl-2">&quot;[files string..]&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">cmd</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-4">jsonMeta</span><span class="hl-1">.</span><span class="hl-4">args</span><span class="hl-1">.</span><span class="hl-4">files</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-4">options:</span><span class="hl-1"> { </span><span class="hl-4">verbose:</span><span class="hl-1"> { </span><span class="hl-4">alias:</span><span class="hl-1"> </span><span class="hl-2">&quot;v&quot;</span><span class="hl-1"> } },</span><br/><span class="hl-1">  </span><span class="hl-4">subCommands:</span><span class="hl-1"> { </span><span class="hl-4">build:</span><span class="hl-1"> { </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Build&quot;</span><span class="hl-1">, </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> () </span><span class="hl-5">=&gt;</span><span class="hl-1"> {} } }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-6">// ⚠️  Older approach - works but less flexible</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">nc</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">().</span><span class="hl-0">init</span><span class="hl-1">(</span><br/><span class="hl-1">  { </span><span class="hl-4">verbose:</span><span class="hl-1"> { </span><span class="hl-4">alias:</span><span class="hl-1"> </span><span class="hl-2">&quot;v&quot;</span><span class="hl-1"> } },</span><br/><span class="hl-1">  { </span><span class="hl-4">build:</span><span class="hl-1"> { </span><span class="hl-4">desc:</span><span class="hl-1"> </span><span class="hl-2">&quot;Build&quot;</span><span class="hl-1">, </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> () </span><span class="hl-5">=&gt;</span><span class="hl-1"> {} } }</span><br/><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h3 id="2-call-configuration-methods-before-init2" class="tsd-anchor-link">2. Call configuration methods before <code>init2()</code><a href="#2-call-configuration-methods-before-init2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="js"><span class="hl-6">// ✅ Correct order</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">nc</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">().</span><span class="hl-0">version</span><span class="hl-1">(</span><span class="hl-2">&quot;1.0.0&quot;</span><span class="hl-1">).</span><span class="hl-0">usage</span><span class="hl-1">(</span><span class="hl-2">&quot;$0 [cmd]&quot;</span><span class="hl-1">).</span><span class="hl-0">init2</span><span class="hl-1">({ </span><span class="hl-4">options</span><span class="hl-1">, </span><span class="hl-4">subCommands</span><span class="hl-1"> });</span><br/><br/><span class="hl-6">// ❌ Wrong - version/usage/help must come before init2()</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">nc</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">().</span><span class="hl-0">init2</span><span class="hl-1">({ </span><span class="hl-4">options</span><span class="hl-1">, </span><span class="hl-4">subCommands</span><span class="hl-1"> }).</span><span class="hl-0">version</span><span class="hl-1">(</span><span class="hl-2">&quot;1.0.0&quot;</span><span class="hl-1">); </span><span class="hl-6">// Too late!</span>
</code><button type="button">Copy</button></pre>

<h3 id="3-use-jsonmeta-for-accessing-parsed-data" class="tsd-anchor-link">3. Use <code>jsonMeta</code> for accessing parsed data<a href="#3-use-jsonmeta-for-accessing-parsed-data" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="js"><span class="hl-6">// ✅ Recommended - clean and typed</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">opts</span><span class="hl-1"> = </span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">command</span><span class="hl-1">.</span><span class="hl-4">jsonMeta</span><span class="hl-1">.</span><span class="hl-4">opts</span><span class="hl-1">;</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">args</span><span class="hl-1"> = </span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">command</span><span class="hl-1">.</span><span class="hl-4">jsonMeta</span><span class="hl-1">.</span><span class="hl-4">args</span><span class="hl-1">;</span><br/><br/><span class="hl-6">// ⚠️  Avoid - raw node access is more complex</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">opts</span><span class="hl-1"> = </span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">command</span><span class="hl-1">.</span><span class="hl-4">optNodes</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<h3 id="4-handle-errors-properly" class="tsd-anchor-link">4. Handle errors properly<a href="#4-handle-errors-properly" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="js"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">nc</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">({ </span><span class="hl-4">noDefaultHandlers:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1"> }).</span><span class="hl-0">init2</span><span class="hl-1">({ </span><span class="hl-4">options</span><span class="hl-1">, </span><span class="hl-4">subCommands</span><span class="hl-1"> });</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">parsed</span><span class="hl-1"> = </span><span class="hl-4">nc</span><span class="hl-1">.</span><span class="hl-0">parse</span><span class="hl-1">();</span><br/><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">errorNodes</span><span class="hl-1">?.</span><span class="hl-4">length</span><span class="hl-1"> &gt; </span><span class="hl-9">0</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-3">for</span><span class="hl-1"> (</span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">node</span><span class="hl-1"> </span><span class="hl-5">of</span><span class="hl-1"> </span><span class="hl-4">parsed</span><span class="hl-1">.</span><span class="hl-4">errorNodes</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">`Error: </span><span class="hl-5">${</span><span class="hl-4">node</span><span class="hl-8">.</span><span class="hl-4">error</span><span class="hl-8">.</span><span class="hl-4">message</span><span class="hl-5">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-4">process</span><span class="hl-1">.</span><span class="hl-0">exit</span><span class="hl-1">(</span><span class="hl-9">1</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h3 id="5-use-async-handlers-with-parseasync" class="tsd-anchor-link">5. Use async handlers with <code>parseAsync()</code><a href="#5-use-async-handlers-with-parseasync" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="js"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">nc</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">NixClap</span><span class="hl-1">().</span><span class="hl-0">init2</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">subCommands:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">deploy:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">exec</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-5">async</span><span class="hl-1"> </span><span class="hl-4">cmd</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">deployToServer</span><span class="hl-1">();</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">nc</span><span class="hl-1">.</span><span class="hl-0">parseAsync</span><span class="hl-1">(); </span><span class="hl-6">// Waits for all async exec handlers</span>
</code><button type="button">Copy</button></pre>

<h2 id="alternatives" class="tsd-anchor-link">Alternatives<a href="#alternatives" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Other popular CLI parsers you might consider:</p>
<ul>
<li><a href="https://github.com/yargs/yargs">yargs</a> - Feature-rich, larger footprint</li>
<li><a href="https://github.com/tj/commander.js">commander</a> - Imperative API, widely used</li>
<li><a href="https://github.com/nodeca/argparse">argparse</a> - Python's argparse port</li>
<li><a href="https://github.com/lahmatiy/clap">clap</a> - Declarative configuration</li>
<li><a href="https://github.com/litert/clap.js">clap.js</a> - TypeScript-first</li>
</ul>
<p><strong>Why NixClap?</strong></p>
<ul>
<li>Smaller and faster than yargs/commander</li>
<li>More Unix-like parsing semantics</li>
<li>Better support for complex command structures</li>
<li>Type-safe TypeScript support</li>
<li>Detailed parse results with source tracking</li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#nixclap"><span>Nix<wbr/>Clap</span></a><ul><li><a href="#features"><span>Features</span></a></li><li><a href="#quick-start"><span>Quick <wbr/>Start</span></a></li><li><ul><li><a href="#simple-cli-with-commands"><span>Simple <wbr/>CLI with commands</span></a></li><li><a href="#cli-with-options"><span>CLI with options</span></a></li><li><a href="#cli-with-command-arguments"><span>CLI with command arguments</span></a></li><li><a href="#root-command-with-arguments"><span>Root command with arguments</span></a></li><li><a href="#with-commands-and-options"><span>With <wbr/>Commands and <wbr/>Options</span></a></li><li><a href="#asyncawait-support"><span>Async/<wbr/>Await <wbr/>Support</span></a></li><li><a href="#accessing-parsed-results"><span>Accessing <wbr/>Parsed <wbr/>Results</span></a></li></ul></li><li><a href="#understanding-init-vs-init2"><span>Understanding init() vs init2()</span></a></li><li><ul><li><a href="#use-init2-recommended"><span>Use init2() (<wbr/>Recommended)</span></a></li><li><a href="#use-init-legacyconvenience"><span>Use init() (<wbr/>Legacy/<wbr/>Convenience)</span></a></li><li><a href="#root-command-execution-decision-tree"><span>Root <wbr/>Command <wbr/>Execution <wbr/>Decision <wbr/>Tree</span></a></li></ul></li><li><a href="#more-examples"><span>More <wbr/>Examples</span></a></li></ul><a href="#parsing-capabilities"><span>Parsing <wbr/>Capabilities</span></a><ul><li><a href="#options"><span>Options</span></a></li><li><ul><li><a href="#unknown-options-behavior"><span>Unknown <wbr/>Options <wbr/>Behavior</span></a></li></ul></li><li><a href="#commands"><span>Commands</span></a></li><li><ul><li><a href="#multiple-commands"><span>Multiple <wbr/>Commands</span></a></li><li><a href="#sub-commands"><span>Sub <wbr/>Commands</span></a></li></ul></li><li><a href="#greedy-mode"><span>Greedy <wbr/>Mode</span></a></li><li><a href="#terminating-and-resuming"><span>Terminating and <wbr/>Resuming</span></a></li><li><a href="#installation"><span>Installation</span></a></li></ul><a href="#interface"><span>Interface</span></a><ul><li><a href="#options-spec"><span>options spec</span></a></li><li><a href="#commands-spec"><span>commands spec</span></a></li><li><ul><li><a href="#rules-for-command-args"><span>Rules for <wbr/>Command args</span></a></li></ul></li><li><a href="#value-coercion"><span>Value <wbr/>Coercion</span></a></li><li><a href="#parse-result"><span>Parse <wbr/>Result</span></a></li><li><ul><li><a href="#error-handling"><span>Error <wbr/>Handling</span></a></li><li><a href="#parse-result-command-object"><span>Parse <wbr/>Result <wbr/>Command <wbr/>Object</span></a></li><li><a href="#command-exec-handler"><span>Command exec handler</span></a></li></ul></li><li><a href="#events"><span>Events</span></a></li><li><ul><li><a href="#event-reference"><span>Event <wbr/>Reference</span></a></li><li><a href="#event-lifecycle"><span>Event <wbr/>Lifecycle</span></a></li><li><a href="#using-events"><span>Using <wbr/>Events</span></a></li><li><a href="#default-event-handlers"><span>Default <wbr/>Event <wbr/>Handlers</span></a></li><li><ul><li><a href="#skip-default-event-behaviors"><span>Skip <wbr/>Default <wbr/>Event <wbr/>Behaviors</span></a></li></ul></li></ul></li><li><a href="#apis"><span>AP<wbr/>Is</span></a></li><li><ul><li><a href="#constructorconfig"><span>constructor(config)</span></a></li><li><a href="#versionv"><span>version(v)</span></a></li><li><a href="#helpsetting"><span>help(setting)</span></a></li><li><a href="#usagemsg-cmdusagemsg"><span>usage(msg), cmd<wbr/>Usage(msg)</span></a></li><li><a href="#initoptions-commands---legacyconvenience-wrapper"><span>init(options, commands) -<wbr/> <wbr/>Legacy/<wbr/>Convenience <wbr/>Wrapper</span></a></li><li><a href="#init2rootcommandspec---primary-api-recommended"><span>init2(root<wbr/>Command<wbr/>Spec) -<wbr/> <wbr/>Primary <wbr/>API (<wbr/>Recommended)</span></a></li><li><a href="#defaultcommandname"><span>default<wbr/>Command(name)</span></a></li><li><a href="#unknowncommandfallback"><span>unknown<wbr/>Command<wbr/>Fallback</span></a></li><li><a href="#parseargv-start-parsed"><span>parse(argv, start, parsed)</span></a></li><li><a href="#parseasyncargv-start-parsed"><span>parse<wbr/>Async(argv, start, parsed)</span></a></li><li><a href="#showhelperr-cmdname"><span>show<wbr/>Help(err, cmd<wbr/>Name)</span></a></li><li><a href="#removedefaulthandlers"><span>remove<wbr/>Default<wbr/>Handlers()</span></a></li><li><a href="#applyconfigconfig-src"><span>apply<wbr/>Config(config, src)</span></a></li><li><a href="#runexecparsed"><span>run<wbr/>Exec(parsed)</span></a></li><li><a href="#runexecasyncparsed"><span>run<wbr/>Exec<wbr/>Async(parsed)</span></a></li></ul></li><li><a href="#typescript-support"><span>Type<wbr/>Script <wbr/>Support</span></a></li><li><ul><li><a href="#basic-typescript-usage"><span>Basic <wbr/>Type<wbr/>Script <wbr/>Usage</span></a></li><li><a href="#using-init2-with-typescript"><span>Using init2() with <wbr/>Type<wbr/>Script</span></a></li><li><a href="#type-safe-command-specs"><span>Type-<wbr/>Safe <wbr/>Command <wbr/>Specs</span></a></li></ul></li><li><a href="#best-practices"><span>Best <wbr/>Practices</span></a></li><li><ul><li><a href="#1-prefer-init2-over-init"><span>1. <wbr/>Prefer init2() over init()</span></a></li><li><a href="#2-call-configuration-methods-before-init2"><span>2. <wbr/>Call configuration methods before init2()</span></a></li><li><a href="#3-use-jsonmeta-for-accessing-parsed-data"><span>3. <wbr/>Use json<wbr/>Meta for accessing parsed data</span></a></li><li><a href="#4-handle-errors-properly"><span>4. <wbr/>Handle errors properly</span></a></li><li><a href="#5-use-async-handlers-with-parseasync"><span>5. <wbr/>Use async handlers with parse<wbr/>Async()</span></a></li></ul></li><li><a href="#alternatives"><span>Alternatives</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">nix-clap</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
